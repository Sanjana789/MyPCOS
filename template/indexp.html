<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="A minimal period tracker web app">
  <meta name="author" content="Riddhi Maniktalia">
  <meta name="theme-color" content="#0099FF">
  <meta name="robots" content="noindex,nofollow">
  <title>Period Tracker</title>
  <link rel="shortcut icon" href="/static/favicon.ico" sizes="any">
  <link rel="icon" href="/static/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="mask-icon" href="/static/safari-pinned-tab.svg" color="#0099ff">
  <meta name="msapplication-TileColor" content="#2b5797">
  <meta name="msapplication-config" content="browserconfig.xml">
  <link rel="stylesheet" href="css/main.css">
</head>
<style>
  :root {
  /*
    --c- for color
    --l- for length
  */
  --c-main-text: #333;
  --c-main-bg: #EEE;
  --c-theme-first: #B0578D;
  --c-theme-second: #FACBEA;
  --c-secondary-text: #1F4172;
  --c-secondary-bg: #CCC;

  --c-bg-alert: unset;
  --c-fg-alert: unset;
  --c-alert-info-light: #d9edf7;
  --c-alert-info-dark: #31708f;
  --c-alert-error-light: #f2dede;
  --c-alert-error-dark: #a94442;
  --c-alert-success-light: #dff0d8;
  --c-alert-success-dark: #3c763d;
  --c-alert-warning-light: #fcf8e3;
  --c-alert-warning-dark: #8a6d3b;

  --l-border-radius: 3px;
  --l-gap: .5rem;
  --l-height-top: 2.5rem;
  --l-height-bottom: 2.8rem;
  --l-icon-size: 1em;
}
*, *:after, *:before {
  -webkit-box-sizing: border-box;
     -moz-box-sizing: border-box;
          box-sizing: border-box;
}
html {
  font-size: 18px;
}
body {
  background: var(--c-main-bg);
  line-height: 1.4;
  margin: 0;
}
body, input, button {
  color: var(--c-main-text);
  font-family: Arial, sans-serif;
}
a {
  color: var(--c-theme-first);
  text-decoration: none;
}
label, button, input[type=button], input[type=submit], input[type=reset] {
  -webkit-appearance: none;
  cursor: pointer;
  user-select: none;
}

.icon {
  display: block;
  fill: currentColor;
  height: var(--l-icon-size);
  margin: 0 auto;
  width: var(--l-icon-size);
}

/*=== header */
.main-header {
  align-items: center;
  background: var(--c-theme-first);
  color: var(--c-theme-second);
  display: flex;
  justify-content: space-between;
  text-shadow: 1px 1px 1px rgba(0, 0, 0, .5);
  user-select: none;
}
.main-header__title {
  font-size: 1em;
  height: inherit;
  margin: 0;
}
.main-header__title__icon {
  --l-icon-size: var(--l-height-top);
  display: inline;
  vertical-align: middle;
}
.main-header__status {
  display: flex;
}
.main-header__status__icon {
  --l-icon-size: 0.8em;
  display: none;
  margin: 0 1px;
}
.main-header__status__icon--active {
  display: block;
}

/*=== sections */
.main-section {
  display: none;
}
.main-section--selected {
  display: block;
}

/*=== grid */
html, body {
  height: 100%;
}
body {
  display: flex;
  flex-direction: column;
  background-image: url('/static/image19.png');
  background-size:cover;
  background-position: center;
  
  
}
.main-content {
  flex: 1 1 auto;
  overflow: auto;
}
.main-header,
.main-section--home,
.main-section--log,
.main-section--settings,
.main-section--not-found,
.log-average {
  padding-left: var(--l-gap);
  padding-right: var(--l-gap);
}
.home__wrapper,
.main-section--settings,
.log-average {
  padding-top: var(--l-gap);
}

/*=== input number with plus & minus buttons */
.input-number input[type=number]::-webkit-inner-spin-button, 
.input-number input[type=number]::-webkit-outer-spin-button { 
  -webkit-appearance: none;
  margin: 0;
}
.input-number input[type=number] {
  -moz-appearance: textfield;
}
.input-number {
  border: 1px solid var(--c-main-text);
  border-radius: var(--l-border-radius);
  display: flex;
  height: 2em;
}
.input-number__input {
  border-color: var(--c-main-text);
  border-radius: 0;
  border-style: solid;
  border-width: 0 1px;
  font-size: inherit;
  margin: 0;
  padding-top: .3em;
  text-align: center;
  width: 3em;
}
.input-number__button {
  background: var(--c-secondary-bg);
  border: 0 none;
  border-radius: 0;
  font-size: 1.5em;
  margin: 0;
  padding: 0;
  text-align: center;
  width: 2em;
}
.input-number__icon {
  --l-icon-size: 0.667em;
}

/*=== input checkbox with svg icons */
.input-checkbox__label {
  position: relative;
}
.input-checkbox__check {
  cursor: inherit;
  font-size: 100%;
  height: var(--l-icon-size);
  margin: 0;
  opacity: 0;
  padding: 0;
  position: absolute;
  right: 1em;
  width: var(--l-icon-size);
}
.input-checkbox__icon {
  margin: 0;
}
/* visually show focus outline when the SVG receives focus */
.input-checkbox__check:focus ~ .input-checkbox__icon {
  outline: 2px solid var(--c-theme-first);
  outline-offset: 2px;
  border-radius: 1px;
}
/* hide the focus styles for mouse users */
.input-checkbox__check:focus:not(:focus-visible) ~ .input-checkbox__icon {
  outline: none;
}
.input-checkbox__icon__checked {
  display: none;
}
.input-checkbox__check:checked ~ .input-checkbox__icon .input-checkbox__icon__checked {
  display: block;
}

/*=== add form */
.add-form input[type=date]::-webkit-inner-spin-button {
  display: none;
}
.add-form {
  display: none;
}
.add-form--selected {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
}
.add-form__date {
  background: transparent;
  border: 1px solid var(--c-main-text);
  border-radius: var(--l-border-radius);
  font-size: inherit;
  margin: var(--l-gap) 0;
  padding: var(--l-gap) calc(var(--l-gap) * 2);
  text-align: center;
  width: 100%;
}
.add-form__button {
  background: var(--c-secondary-bg);
  border: 1px solid var(--c-main-text);
  border-radius: var(--l-border-radius);
  font-size: inherit;
  margin: 0 0 var(--l-gap);
  padding: var(--l-gap) calc(var(--l-gap) * 2);
  width: 100%;
}
@media (min-width:300px) {
  .add-form__button {
    width: 49%;
  }
}

/*=== edit form */
.edit-form {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  padding: 0 .5em;
}

/*=== nav */
.main-nav {
  background: var(--c-theme-first);
  order: 1;
  user-select: none;
}
.main-nav__list {
  align-items: stretch;
  display: flex;
  margin: 0;
  padding: 0;
  text-align: center;
}
.main-nav__item {
  flex: 1;
  list-style: none;
}
.main-nav__link {
  color: var(--c-theme-second);
  display: block;
  font-size: .8em;
  padding-top: 0.5em;
  text-shadow: 1px 1px 1px rgba(0, 0, 0, .5);
}
.main-nav__link:hover, .main-nav__link:focus {
  text-shadow: 1px 1px 10px rgba(255, 255, 255, 1);
}
.main-nav__link--selected {
  background: var(--c-theme-second);
  color: var(--c-theme-first);
  text-shadow: none;
}
.main-nav__icon {
  --l-icon-size: 1.25em;
  margin-bottom: .25em;
  stroke: rgba(0, 0, 0, .2);
}

/*=== home */
.home__wrapper {
  text-align: center;
}
.home__calc {
  font-size: .9em;
  margin-bottom: calc(var(--l-gap) * 2);
}
.home__calc--invisible {
  visibility: hidden;
}
.home__next,
.home__countdown,
.home__counter {
  font-size: 1.33em;
  font-weight: bold;
}
.home__countdown,
.home__counter {
  font-size: 1.67em;
}
.home__add {
  background: var(--c-theme-second);
  border: 1px solid rgba(0, 0, 0, .25);
  border-radius: var(--l-border-radius);
  color: var(--c-theme-first);
  display: block;
  font-size: 1.5em;
  font-weight: bold;
  margin: 0 auto;
  padding: .47em .67em;
  width: 100%;
}
.home_add--hide {
  display: none;
}
.home__add__tap {
  display: block;
  font-size: .6em;
  margin-top: .34em;
}

/*=== calendar */
.main-section--calendar,
.calendar-data {
  height: 100%;
}
.calendar {
  background: var(--c-secondary-bg);
  border-spacing: 1px;
  height: 100%;
  text-align: center;
  user-select: none;
  width: 100%;
}
.calendar__nav {
  align-items: center;
  display: flex;
  justify-content: space-between;
}
.calendar__nav div {
  align-items: center;
  display: flex;
}
.calendar__nav__middle a {
  margin-right: -0.9em;
}
.calendar__nav__middle span {
  padding: 0 1em;
}
.calendar__nav__middle svg {
  --l-icon-size: 0.9em;
}
.calendar__nav__link {
  display: block;
}
.calendar__nav__link:hover, .calendar__nav__link:focus {
  color: var(--c-theme-second);
}
.calendar__nav__icon {
  --l-icon-size: 2em;
}
.calendar__weekday {
  font-size: .7em;
  font-weight: normal;
}
.calendar__day {
  background: var(--c-main-bg);
  font-size: .9em;
  font-weight: bold;
  padding: .7em .3em .6em;
  position: relative;
  width: 14.3%; /* 100 / 7 */
}
.calendar__day:before {
  color: var(--c-secondary-text);
  content: attr(data-counter);
  font-size: .7em;
  font-weight: normal;
  left: 2px;
  position: absolute;
  top: 0;
}
.calendar__day--another-month {
  color: var(--c-secondary-text);
  font-weight: normal;
}
.calendar__day--another-month:after {
  background: var(--c-main-bg);
  content: '';
  display: block;
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}
.calendar--extended .calendar__day--another-month:after {
  display: none;
}
.calendar__day--today {
  box-shadow: inset 0px 0px 0px 5px var(--c-theme-first);
}
.calendar__day--selected {
  background: var(--c-theme-second);
}
.calendar__day--selected-future {
  background: var(--c-main-bg);
  background-image: linear-gradient(to top right, transparent 50%, var(--c-theme-second) 0);
}

/*=== log */
.log-list {
  border-collapse: collapse;
  margin-top: var(--l-gap);
  width: 100%;
}
.log-list__item--selected {
  outline: 2px dashed var(--c-theme-first);
}
.log-list__item--edit-form {
  outline: 2px dashed var(--c-theme-first);
  position: relative;
}
.log-list__item--edit-form:after {
  background-color: var(--c-main-bg);
  content: '';
  height: 4px;
  left: 0;
  position: absolute;
  top: -2px;
  width: 100%;
}
tfoot .log-list__item--edit-form {
  display: none;
}
.log-list__info {
  border-bottom: 1px solid var(--c-secondary-bg);
  padding: .6em .5em .5em;
}
.log-list__info--interval {
  padding-right: 1em;
  text-align: right;
  width: 2em;
}
.log-list__info--edit,
.log-list__info--remove {
  padding: 0;
  width: 2.5em;
}
.log-list__button {
  background: transparent;
  border: 0 none;
  color: var(--c-secondary-text);
  display: block;
  font-size: inherit;
  width: 100%;
}
.log-average {
  background: var(--c-secondary-bg);
  font-size: .8em;
  margin-bottom: calc(var(--l-gap) * 2);
  margin-left: calc(-1 * var(--l-gap));
  margin-right: calc(-1 * var(--l-gap));
  padding-bottom: calc(var(--l-gap) * 2);
  text-align: center;
}
.log-average__counter {
  display: block;
  font-size: 3.75em;
  line-height: 1;
  padding-bottom: .1em;
}
.centeralizing{
  margin-left: 42%;
}

/*=== settings */
#centralizingstuff{
  margin-top:10%;
}
.settings__option {
  align-items: center;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  margin: 0 0 .3em;
  padding: .5em 0 .5em 1px;
  text-align: left;
  width: 100%;
}
.settings__button {
  background: var(--c-secondary-bg);
  border: 1px solid var(--c-main-text);
  border-radius: var(--l-border-radius);
  font-size: inherit;
  padding-left: 1em;
  padding-right: 1em;
}
.settings__info {
  border-top: 1px solid var(--c-secondary-bg);
  margin: 2em 0 0;
  padding: 1em 0 0;
}
.hidden {
  display: none;
}


/*=== alert */
.alerts-wrapper {
  bottom: var(--l-height-bottom);
  left: var(--l-gap);
  position: fixed;
  width: calc(100% - var(--l-gap) * 2);
}
.alert {
  align-items: center;
  border: 1px solid rgba(0, 0, 0, .25);
  border-radius: var(--l-border-radius);
  display: flex;
  justify-content: space-between;
  margin: 1em 0;
  padding: .25em .5em;
  width: 100%;
  background: var(--c-bg-alert);
  color: var(--c-fg-alert);
}
.alert__close {
  background: transparent;
  border: 0 none;
  border-radius: 100%;
  color: inherit;
  font-size: inherit;
  height: 2em;
  margin-left: var(--l-gap);
  padding: 0;
}
.alert__close__icon {
  --l-icon-size: 2em;
}
.alert .alert__close:hover,
.alert .alert__close:focus,
.alert .alert__close:active {
  background: var(--c-fg-alert);
  box-shadow: 0px 0px 0px 2px var(--c-fg-alert);
  color: var(--c-bg-alert);
}
.alert--info {
  --c-bg-alert: var(--c-alert-info-light);
  --c-fg-alert: var(--c-alert-info-dark);
}
.alert--error {
  --c-bg-alert: var(--c-alert-error-light);
  --c-fg-alert: var(--c-alert-error-dark);
}
.alert--success {
  --c-bg-alert: var(--c-alert-success-light);
  --c-fg-alert: var(--c-alert-success-dark);
}
.alert--warning {
  --c-bg-alert: var(--c-alert-warning-light);
  --c-fg-alert: var(--c-alert-warning-dark);
}
</style>

<body>

<svg style="position: absolute; width: 0; height: 0;" width="0" height="0" version="1.1">
  <defs>
  <symbol id="icon-home" viewBox="0 0 32 32">
  <path d="M32 18.451l-16-12.42-16 12.42v-5.064l16-12.42 16 12.42zM28 18v12h-8v-8h-8v8h-8v-12l12-9z"></path>
  </symbol>
  <symbol id="icon-edit" viewBox="0 0 32 32">
  <path d="M12 20l4-2 14-14-2-2-14 14-2 4zM9.041 27.097c-0.989-2.085-2.052-3.149-4.137-4.137l3.097-8.525 4-2.435 12-12h-6l-12 12-6 20 20-6 12-12v-6l-12 12-2.435 4z"></path>
  </symbol>
  <symbol id="icon-calendar" viewBox="0 0 32 32">
  <path d="M10 12h4v4h-4zM16 12h4v4h-4zM22 12h4v4h-4zM4 24h4v4h-4zM10 24h4v4h-4zM16 24h4v4h-4zM10 18h4v4h-4zM16 18h4v4h-4zM22 18h4v4h-4zM4 18h4v4h-4zM26 0v2h-4v-2h-14v2h-4v-2h-4v32h30v-32h-4zM28 30h-26v-22h26v22z"></path>
  </symbol>
  <symbol id="icon-settings" viewBox="0 0 32 32">
  <path d="M29.181 19.070c-1.679-2.908-0.669-6.634 2.255-8.328l-3.145-5.447c-0.898 0.527-1.943 0.829-3.058 0.829-3.361 0-6.085-2.742-6.085-6.125h-6.289c0.008 1.044-0.252 2.103-0.811 3.070-1.679 2.908-5.411 3.897-8.339 2.211l-3.144 5.447c0.905 0.515 1.689 1.268 2.246 2.234 1.676 2.903 0.672 6.623-2.241 8.319l3.145 5.447c0.895-0.522 1.935-0.82 3.044-0.82 3.35 0 6.067 2.725 6.084 6.092h6.289c-0.003-1.034 0.259-2.080 0.811-3.038 1.676-2.903 5.399-3.894 8.325-2.219l3.145-5.447c-0.899-0.515-1.678-1.266-2.232-2.226zM16 22.479c-3.578 0-6.479-2.901-6.479-6.479s2.901-6.479 6.479-6.479c3.578 0 6.479 2.901 6.479 6.479s-2.901 6.479-6.479 6.479z"></path>
  </symbol>
  <symbol id="icon-delete" viewBox="0 0 32 32">
  <path d="M4 10v20c0 1.1 0.9 2 2 2h18c1.1 0 2-0.9 2-2v-20h-22zM10 28h-2v-14h2v14zM14 28h-2v-14h2v14zM18 28h-2v-14h2v14zM22 28h-2v-14h2v14z"></path>
  <path d="M26.5 4h-6.5v-2.5c0-0.825-0.675-1.5-1.5-1.5h-7c-0.825 0-1.5 0.675-1.5 1.5v2.5h-6.5c-0.825 0-1.5 0.675-1.5 1.5v2.5h26v-2.5c0-0.825-0.675-1.5-1.5-1.5zM18 4h-6v-1.975h6v1.975z"></path>
  </symbol>
  <symbol id="icon-log" viewBox="0 0 32 32">
  <path d="M12 2h20v4h-20v-4zM12 14h20v4h-20v-4zM12 26h20v4h-20v-4zM0 4c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4s-4-1.791-4-4zM0 16c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4s-4-1.791-4-4zM0 28c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4s-4-1.791-4-4z"></path>
  </symbol>
  <symbol id="icon-next" viewBox="0 0 32 32">
  <path d="M6 4l20 12-20 12z"></path>
  </symbol>
  <symbol id="icon-prev" viewBox="0 0 32 32">
  <path d="M26 4l-20 12 20 12z"></path>
  </symbol>
  <symbol id="icon-up" viewBox="0 0 32 32">
  <path d="M4 26l12-20 12 20z"></path>
  </symbol>
  <symbol id="icon-down" viewBox="0 0 32 32">
  <path d="M28 6l-12 20-12-20z"></path>
  </symbol>
  <symbol id="icon-checked" viewBox="0 0 32 32">
  <path d="M28 0h-24c-2.2 0-4 1.8-4 4v24c0 2.2 1.8 4 4 4h24c2.2 0 4-1.8 4-4v-24c0-2.2-1.8-4-4-4zM14 24.828l-7.414-7.414 2.828-2.828 4.586 4.586 9.586-9.586 2.828 2.828-12.414 12.414z"></path>
  </symbol>
  <symbol id="icon-unchecked" viewBox="0 0 32 32">
  <path d="M28 0h-24c-2.2 0-4 1.8-4 4v24c0 2.2 1.8 4 4 4h24c2.2 0 4-1.8 4-4v-24c0-2.2-1.8-4-4-4zM28 28h-24v-24h24v24z"></path>
  </symbol>
  <symbol id="icon-plus" viewBox="0 0 32 32">
  <path d="M31 12h-11v-11c0-0.552-0.448-1-1-1h-6c-0.552 0-1 0.448-1 1v11h-11c-0.552 0-1 0.448-1 1v6c0 0.552 0.448 1 1 1h11v11c0 0.552 0.448 1 1 1h6c0.552 0 1-0.448 1-1v-11h11c0.552 0 1-0.448 1-1v-6c0-0.552-0.448-1-1-1z"></path>
  </symbol>
  <symbol id="icon-minus" viewBox="0 0 32 32">
  <path d="M0 13v6c0 0.552 0.448 1 1 1h30c0.552 0 1-0.448 1-1v-6c0-0.552-0.448-1-1-1h-30c-0.552 0-1 0.448-1 1z"></path>
  </symbol>
  <symbol id="icon-moon" viewBox="0 0 32 32">
  <path d="M18.214 11.762l-1.214 3.238-1.214-3.238-2.286-0.762 2.286-0.762 1.214-3.238 1.214 3.238 2.286 0.762-2.286 0.762zM22.214 18.238l-1.214-3.238-1.214 3.238-2.286 0.762 2.286 0.762 1.214 3.238 1.214-3.238 2.286-0.762-2.286-0.762zM14.836 22.331v0c0.088-0.351 0.142-0.716 0.158-1.091-0.468 0.165-0.971 0.254-1.495 0.254-2.485 0-4.5-2.015-4.5-4.5 0-0.524 0.090-1.027 0.254-1.495-0.374 0.016-0.739 0.070-1.091 0.158-2.392 0.597-4.163 2.76-4.163 5.336 0 3.038 2.462 5.5 5.5 5.5 2.577 0 4.739-1.772 5.337-4.163zM5 20.995c0-1.961 1.255-3.63 3.005-4.246-0.004 0.081-0.005 0.163-0.005 0.246 0 3.038 2.462 5.5 5.5 5.5 0.082 0 0.164-0.002 0.246-0.005-0.616 1.751-2.284 3.005-4.246 3.005-2.485 0-4.5-2.015-4.5-4.5v0zM26.867 12.429l1.633 0.571-1.633 0.571-0.867 2.429-0.867-2.429-1.633-0.571 1.633-0.571 0.867-2.429 0.867 2.429z"></path>
  </symbol>
  <symbol id="icon-cancel-circle" viewBox="0 0 32 32">
  <path d="M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13z"></path>
  <path d="M21 8l-5 5-5-5-3 3 5 5-5 5 3 3 5-5 5 5 3-3-5-5 5-5z"></path>
  </symbol>
  <symbol id="icon-offline" viewBox="0 0 32 32">
  <path d="M24 19.999l-5.713-5.713 13.713-10.286-4-4-17.141 6.858-5.397-5.397c-1.556-1.556-3.728-1.928-4.828-0.828s-0.727 3.273 0.828 4.828l5.396 5.396-6.858 17.143 4 4 10.287-13.715 5.713 5.713v7.999h4l2-6 6-2v-4l-7.999 0z"></path>
  </symbol>
  <symbol id="icon-today" viewBox="0 0 32 32">
  <path d="M24.411 17.214l-9.143 9.143c-0.232 0.214-0.589 0.214-0.821 0l-5.143-5.143c-0.214-0.232-0.214-0.589 0-0.804l0.821-0.821c0.214-0.214 0.571-0.214 0.804 0l3.929 3.929 7.929-7.929c0.232-0.214 0.589-0.214 0.804 0l0.821 0.821c0.214 0.214 0.214 0.571 0 0.804zM3.429 29.714h25.143v-18.286h-25.143v18.286zM10.286 8v-5.143c0-0.321-0.25-0.571-0.571-0.571h-1.143c-0.321 0-0.571 0.25-0.571 0.571v5.143c0 0.321 0.25 0.571 0.571 0.571h1.143c0.321 0 0.571-0.25 0.571-0.571zM24 8v-5.143c0-0.321-0.25-0.571-0.571-0.571h-1.143c-0.321 0-0.571 0.25-0.571 0.571v5.143c0 0.321 0.25 0.571 0.571 0.571h1.143c0.321 0 0.571-0.25 0.571-0.571zM30.857 6.857v22.857c0 1.25-1.036 2.286-2.286 2.286h-25.143c-1.25 0-2.286-1.036-2.286-2.286v-22.857c0-1.25 1.036-2.286 2.286-2.286h2.286v-1.714c0-1.571 1.286-2.857 2.857-2.857h1.143c1.571 0 2.857 1.286 2.857 2.857v1.714h6.857v-1.714c0-1.571 1.286-2.857 2.857-2.857h1.143c1.571 0 2.857 1.286 2.857 2.857v1.714h2.286c1.25 0 2.286 1.036 2.286 2.286z"></path>
  </symbol>
  </defs>
</svg>


<header class="main-header">
  <h1 class="main-header__title"><svg class="icon main-header__title__icon" focusable="false" aria-hidden="true"><use href="#icon-moon"></use></svg>Period Tracker <span id="version"></span></h1>
  <div class="main-header__status"><svg id="status-icon-offline" class="icon main-header__status__icon" focusable="false" aria-hidden="true"><use href="#icon-offline"></use></svg></div>
</header>

<nav class="main-nav">
  <ul class="main-nav__list">
    <li class="main-nav__item">
      <a class="main-nav__link" href="#/home"><svg class="icon main-nav__icon" focusable="false" aria-hidden="true"><use href="#icon-home"></use></svg>home</a></li>
    <li class="main-nav__item">
      <a class="main-nav__link" href="#/calendar"><svg class="icon main-nav__icon" focusable="false" aria-hidden="true"><use href="#icon-calendar"></use></svg>calendar</a></li>
    <li class="main-nav__item">
      <a class="main-nav__link" href="#/log"><svg class="icon main-nav__icon" focusable="false" aria-hidden="true"><use href="#icon-log"></use></svg>log</a></li>
    <li class="main-nav__item">
      <a class="main-nav__link" href="#/settings"><svg class="icon main-nav__icon" focusable="false" aria-hidden="true"><use href="#icon-settings"></use></svg>settings</a></li>
  </ul>
</nav>

<main class="main-content">
<!-- HOME -->
  <section id="home" class="main-section main-section--home">
    <div class="home__wrapper">
      <div id="home-calc">
        <div class="home__calc" style="margin-top: 10%;">Next period date: <br><time id="next" class="home__next">&nbsp;</time></div>
        <div class="home__calc">Number of days left to next period cycle:<br> <span id="countdown" class="home__countdown">&nbsp;</span></div>
        <div class="home__calc">This cycle's period day number:<br> <span id="counter" class="home__counter">&nbsp;</span></div>
      </div>

      <button type="button" class="home__add add-form__toggle" id="home-add" form="add-form--home">Period just started <span class="home__add__tap">tap here</span></button>
      
      <form class="add-form" id="add-form--home">
        <input type="date" name="add-date" class="add-form__date" required aria-label="New period starting date">
        <input type="reset" value="Cancel" class="add-form__button">
        <input type="submit" value="Save" class="add-form__button">
      </form>
    </div>
  </section>


<!-- CALENDAR -->
  <section id="calendar" class="main-section main-section--calendar">
    <div id="calendar-data" class="calendar-data"></div>
  </section>


<!-- LOG -->
  <section id="log" class="main-section main-section--log">
    <div class="log-average">
      <span id="average" class="log-average__counter">&nbsp;</span> Days in your average cycle
    </div>

    <button type="button" class="log__add add-form__toggle settings__button centeralizing" form="add-form--log">Add date of your period</button>

    <form class="add-form" id="add-form--log">
      <input type="date" name="add-date" class="add-form__date" required aria-label="New entry starting date">
      <input type="reset" value="Cancel" class="add-form__button">
      <input type="submit" value="Save" class="add-form__button">
    </form>

    

    <div>
      <table class="log-list">
        <tbody id="log-data"></tbody>
        <tfoot>
          <tr id="edit-form--log-tr" class="log-list__item--edit-form">
            <td colspan="4">
              <form class="edit-form" id="edit-form--log">
                <input type="hidden" name="edit-id">
                <input type="date" name="edit-date" class="add-form__date" required aria-label="Entry starting date">
                <input type="reset" value="Cancel" class="add-form__button">
                <input type="submit" value="Save" class="add-form__button">
              </form>
            </td>
          </tr>
        </tfoot>
      </table>
    </div>
  </section>


<!-- SETTINGS -->
<section id="centralizingstuff">
  <section id="settings" class="main-section main-section--settings">
    <div class="settings">
      <label class="settings__option settings__button hidden" for="import-data">Import from backup<input type="file" id="import-data" accept=".txt"></label>

    <button class="settings__option settings__button hidden" id="export-data">Export to backup</button>

      <button class="settings__option settings__button hidden" id="share-data">Share data to…</button>

      <button class="settings__option settings__button" id="delete-all">Delete all data</button>
      
      <div class="input-checkbox">
        <label for="settings-week-start" class="input-checkbox__label settings__option settings__button">
          <input type="checkbox" id="settings-week-start" class="input-checkbox__check">
          <span>Mon-Sun calendar</span>
          <svg class="icon input-checkbox__icon" focusable="false" aria-hidden="true">
            <use href="#icon-unchecked" class="input-checkbox__icon__unchecked"></use><use href="#icon-checked" class="input-checkbox__icon__checked"></use>
          </svg>
        </label>
      </div>

      <div class="input-checkbox">
        <label for="settings-extended-month" class="input-checkbox__label settings__option settings__button">
          <input type="checkbox" id="settings-extended-month" class="input-checkbox__check">
          <span>Show extended month</span>
          <svg class="icon input-checkbox__icon" focusable="false" aria-hidden="true">
            <use href="#icon-unchecked" class="input-checkbox__icon__unchecked"></use><use href="#icon-checked" class="input-checkbox__icon__checked"></use>
          </svg>
        </label>
      </div>
      
      <div class="settings__option"><label for="settings-period-length">Period length</label> 
        <div class="input-number js-number">
          <button class="input-number__button js-number__sub" aria-label="Decrease period length by 1"><svg class="icon input-number__icon" focusable="false" aria-hidden="true"><use href="#icon-minus"></use></svg></button>
          <input type="number" class="input-number__input js-number__input" id="settings-period-length" min="1">
          <button class="input-number__button js-number__add" aria-label="Increase period length by 1"><svg class="icon input-number__icon" focusable="false" aria-hidden="true"><use href="#icon-plus"></use></svg></button>
        </div>
      </div>

      <div class="settings__option"><label for="settings-cycle-length">Cycle length</label> 
        <div class="input-number js-number">
          <button class="input-number__button js-number__sub" aria-label="Decrease cycle length by 1"><svg class="icon input-number__icon" focusable="false" aria-hidden="true"><use href="#icon-minus"></use></svg></button>
          <input type="number" class="input-number__input js-number__input" id="settings-cycle-length" min="1">
          <button class="input-number__button js-number__add" aria-label="Increase cycle length by 1"><svg class="icon input-number__icon" focusable="false" aria-hidden="true"><use href="#icon-plus"></use></svg></button>
        </div>
      </div>
    </section>   

<!-- NOT FOUND -->
  <section id="not-found" class="main-section main-section--not-found">
    <p>The section you are trying to access does not exist. <br> Go back to the <a href="#/home">home</a></p>
  </section>

<!-- ALERTS -->
  <div id="alerts" class="alerts-wrapper"></div>
</main>

<script>
  !function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var H;function f(){return H.apply(null,arguments)}function a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function F(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function L(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;for(var t in e)if(c(e,t))return;return 1}function o(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function V(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function G(e,t){for(var n=[],s=e.length,i=0;i<s;++i)n.push(t(e[i],i));return n}function E(e,t){for(var n in t)c(t,n)&&(e[n]=t[n]);return c(t,"toString")&&(e.toString=t.toString),c(t,"valueOf")&&(e.valueOf=t.valueOf),e}function l(e,t,n,s){return Pt(e,t,n,s,!0).utc()}function m(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function A(e){if(null==e._isValid){var t=m(e),n=j.call(t.parsedDateParts,function(e){return null!=e}),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function I(e){var t=l(NaN);return null!=e?E(m(t),e):m(t).userInvalidated=!0,t}var j=Array.prototype.some||function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1},Z=f.momentProperties=[],z=!1;function $(e,t){var n,s,i,r=Z.length;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=m(t)),o(t._locale)||(e._locale=t._locale),0<r)for(n=0;n<r;n++)o(i=t[s=Z[n]])||(e[s]=i);return e}function q(e){$(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===z&&(z=!0,f.updateOffset(this),z=!1)}function h(e){return e instanceof q||null!=e&&null!=e._isAMomentObject}function B(e){!1===f.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function e(r,a){var o=!0;return E(function(){if(null!=f.deprecationHandler&&f.deprecationHandler(null,r),o){for(var e,t,n=[],s=arguments.length,i=0;i<s;i++){if(e="","object"==typeof arguments[i]){for(t in e+="\n["+i+"] ",arguments[0])c(arguments[0],t)&&(e+=t+": "+arguments[0][t]+", ");e=e.slice(0,-2)}else e=arguments[i];n.push(e)}B(r+"\nArguments: "+Array.prototype.slice.call(n).join("")+"\n"+(new Error).stack),o=!1}return a.apply(this,arguments)},a)}var J={};function Q(e,t){null!=f.deprecationHandler&&f.deprecationHandler(e,t),J[e]||(B(t),J[e]=!0)}function d(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function X(e,t){var n,s=E({},e);for(n in t)c(t,n)&&(F(e[n])&&F(t[n])?(s[n]={},E(s[n],e[n]),E(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)c(e,n)&&!c(t,n)&&F(e[n])&&(s[n]=E({},s[n]));return s}function K(e){null!=e&&this.set(e)}f.suppressDeprecationWarnings=!1,f.deprecationHandler=null;var ee=Object.keys||function(e){var t,n=[];for(t in e)c(e,t)&&n.push(t);return n};function r(e,t,n){var s=""+Math.abs(e);return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,t-s.length)).toString().substr(1)+s}var te=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ne=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,se={},ie={};function s(e,t,n,s){var i="string"==typeof s?function(){return this[s]()}:s;e&&(ie[e]=i),t&&(ie[t[0]]=function(){return r(i.apply(this,arguments),t[1],t[2])}),n&&(ie[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function re(e,t){return e.isValid()?(t=ae(t,e.localeData()),se[t]=se[t]||function(s){for(var e,i=s.match(te),t=0,r=i.length;t<r;t++)ie[i[t]]?i[t]=ie[i[t]]:i[t]=(e=i[t]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){for(var t="",n=0;n<r;n++)t+=d(i[n])?i[n].call(e,s):i[n];return t}}(t),se[t](e)):e.localeData().invalidDate()}function ae(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(ne.lastIndex=0;0<=n&&ne.test(e);)e=e.replace(ne,s),ne.lastIndex=0,--n;return e}var oe={};function t(e,t){var n=e.toLowerCase();oe[n]=oe[n+"s"]=oe[t]=e}function _(e){return"string"==typeof e?oe[e]||oe[e.toLowerCase()]:void 0}function ue(e){var t,n,s={};for(n in e)c(e,n)&&(t=_(n))&&(s[t]=e[n]);return s}var le={};function n(e,t){le[e]=t}function he(e){return e%4==0&&e%100!=0||e%400==0}function y(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function g(e){var e=+e,t=0;return t=0!=e&&isFinite(e)?y(e):t}function de(t,n){return function(e){return null!=e?(fe(this,t,e),f.updateOffset(this,n),this):ce(this,t)}}function ce(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function fe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&he(e.year())&&1===e.month()&&29===e.date()?(n=g(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),We(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var i=/\d/,w=/\d\d/,me=/\d{3}/,_e=/\d{4}/,ye=/[+-]?\d{6}/,p=/\d\d?/,ge=/\d\d\d\d?/,we=/\d\d\d\d\d\d?/,pe=/\d{1,3}/,ke=/\d{1,4}/,ve=/[+-]?\d{1,6}/,Me=/\d+/,De=/[+-]?\d+/,Se=/Z|[+-]\d\d:?\d\d/gi,Ye=/Z|[+-]\d\d(?::?\d\d)?/gi,k=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function v(e,n,s){be[e]=d(n)?n:function(e,t){return e&&s?s:n}}function Oe(e,t){return c(be,e)?be[e](t._strict,t._locale):new RegExp(M(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i})))}function M(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var be={},xe={};function D(e,n){var t,s,i=n;for("string"==typeof e&&(e=[e]),u(n)&&(i=function(e,t){t[n]=g(e)}),s=e.length,t=0;t<s;t++)xe[e[t]]=i}function Te(e,i){D(e,function(e,t,n,s){n._w=n._w||{},i(e,n._w,n,s)})}var S,Y=0,O=1,b=2,x=3,T=4,N=5,Ne=6,Pe=7,Re=8;function We(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=(t%(n=12)+n)%n;return e+=(t-n)/12,1==n?he(e)?29:28:31-n%7%2}S=Array.prototype.indexOf||function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},s("M",["MM",2],"Mo",function(){return this.month()+1}),s("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),s("MMMM",0,0,function(e){return this.localeData().months(this,e)}),t("month","M"),n("month",8),v("M",p),v("MM",p,w),v("MMM",function(e,t){return t.monthsShortRegex(e)}),v("MMMM",function(e,t){return t.monthsRegex(e)}),D(["M","MM"],function(e,t){t[O]=g(e)-1}),D(["MMM","MMMM"],function(e,t,n,s){s=n._locale.monthsParse(e,s,n._strict);null!=s?t[O]=s:m(n).invalidMonth=e});var Ce="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ue="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),He=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Fe=k,Le=k;function Ve(e,t){var n;if(e.isValid()){if("string"==typeof t)if(/^\d+$/.test(t))t=g(t);else if(!u(t=e.localeData().monthsParse(t)))return;n=Math.min(e.date(),We(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n)}}function Ge(e){return null!=e?(Ve(this,e),f.updateOffset(this,!0),this):ce(this,"Month")}function Ee(){function e(e,t){return t.length-e.length}for(var t,n=[],s=[],i=[],r=0;r<12;r++)t=l([2e3,r]),n.push(this.monthsShort(t,"")),s.push(this.months(t,"")),i.push(this.months(t,"")),i.push(this.monthsShort(t,""));for(n.sort(e),s.sort(e),i.sort(e),r=0;r<12;r++)n[r]=M(n[r]),s[r]=M(s[r]);for(r=0;r<24;r++)i[r]=M(i[r]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Ae(e){return he(e)?366:365}s("Y",0,0,function(){var e=this.year();return e<=9999?r(e,4):"+"+e}),s(0,["YY",2],0,function(){return this.year()%100}),s(0,["YYYY",4],0,"year"),s(0,["YYYYY",5],0,"year"),s(0,["YYYYYY",6,!0],0,"year"),t("year","y"),n("year",1),v("Y",De),v("YY",p,w),v("YYYY",ke,_e),v("YYYYY",ve,ye),v("YYYYYY",ve,ye),D(["YYYYY","YYYYYY"],Y),D("YYYY",function(e,t){t[Y]=2===e.length?f.parseTwoDigitYear(e):g(e)}),D("YY",function(e,t){t[Y]=f.parseTwoDigitYear(e)}),D("Y",function(e,t){t[Y]=parseInt(e,10)}),f.parseTwoDigitYear=function(e){return g(e)+(68<g(e)?1900:2e3)};var Ie=de("FullYear",!0);function je(e,t,n,s,i,r,a){var o;return e<100&&0<=e?(o=new Date(e+400,t,n,s,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,r,a),o}function Ze(e){var t;return e<100&&0<=e?((t=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,t)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function ze(e,t,n){n=7+t-n;return n-(7+Ze(e,0,n).getUTCDay()-t)%7-1}function $e(e,t,n,s,i){var r,t=1+7*(t-1)+(7+n-s)%7+ze(e,s,i),n=t<=0?Ae(r=e-1)+t:t>Ae(e)?(r=e+1,t-Ae(e)):(r=e,t);return{year:r,dayOfYear:n}}function qe(e,t,n){var s,i,r=ze(e.year(),t,n),r=Math.floor((e.dayOfYear()-r-1)/7)+1;return r<1?s=r+P(i=e.year()-1,t,n):r>P(e.year(),t,n)?(s=r-P(e.year(),t,n),i=e.year()+1):(i=e.year(),s=r),{week:s,year:i}}function P(e,t,n){var s=ze(e,t,n),t=ze(e+1,t,n);return(Ae(e)-s+t)/7}s("w",["ww",2],"wo","week"),s("W",["WW",2],"Wo","isoWeek"),t("week","w"),t("isoWeek","W"),n("week",5),n("isoWeek",5),v("w",p),v("ww",p,w),v("W",p),v("WW",p,w),Te(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=g(e)});function Be(e,t){return e.slice(t,7).concat(e.slice(0,t))}s("d",0,"do","day"),s("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),s("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),s("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),s("e",0,0,"weekday"),s("E",0,0,"isoWeekday"),t("day","d"),t("weekday","e"),t("isoWeekday","E"),n("day",11),n("weekday",11),n("isoWeekday",11),v("d",p),v("e",p),v("E",p),v("dd",function(e,t){return t.weekdaysMinRegex(e)}),v("ddd",function(e,t){return t.weekdaysShortRegex(e)}),v("dddd",function(e,t){return t.weekdaysRegex(e)}),Te(["dd","ddd","dddd"],function(e,t,n,s){s=n._locale.weekdaysParse(e,s,n._strict);null!=s?t.d=s:m(n).invalidWeekday=e}),Te(["d","e","E"],function(e,t,n,s){t[s]=g(e)});var Je="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Qe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Xe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ke=k,et=k,tt=k;function nt(){function e(e,t){return t.length-e.length}for(var t,n,s,i=[],r=[],a=[],o=[],u=0;u<7;u++)s=l([2e3,1]).day(u),t=M(this.weekdaysMin(s,"")),n=M(this.weekdaysShort(s,"")),s=M(this.weekdays(s,"")),i.push(t),r.push(n),a.push(s),o.push(t),o.push(n),o.push(s);i.sort(e),r.sort(e),a.sort(e),o.sort(e),this._weekdaysRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function st(){return this.hours()%12||12}function it(e,t){s(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function rt(e,t){return t._meridiemParse}s("H",["HH",2],0,"hour"),s("h",["hh",2],0,st),s("k",["kk",2],0,function(){return this.hours()||24}),s("hmm",0,0,function(){return""+st.apply(this)+r(this.minutes(),2)}),s("hmmss",0,0,function(){return""+st.apply(this)+r(this.minutes(),2)+r(this.seconds(),2)}),s("Hmm",0,0,function(){return""+this.hours()+r(this.minutes(),2)}),s("Hmmss",0,0,function(){return""+this.hours()+r(this.minutes(),2)+r(this.seconds(),2)}),it("a",!0),it("A",!1),t("hour","h"),n("hour",13),v("a",rt),v("A",rt),v("H",p),v("h",p),v("k",p),v("HH",p,w),v("hh",p,w),v("kk",p,w),v("hmm",ge),v("hmmss",we),v("Hmm",ge),v("Hmmss",we),D(["H","HH"],x),D(["k","kk"],function(e,t,n){e=g(e);t[x]=24===e?0:e}),D(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),D(["h","hh"],function(e,t,n){t[x]=g(e),m(n).bigHour=!0}),D("hmm",function(e,t,n){var s=e.length-2;t[x]=g(e.substr(0,s)),t[T]=g(e.substr(s)),m(n).bigHour=!0}),D("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[x]=g(e.substr(0,s)),t[T]=g(e.substr(s,2)),t[N]=g(e.substr(i)),m(n).bigHour=!0}),D("Hmm",function(e,t,n){var s=e.length-2;t[x]=g(e.substr(0,s)),t[T]=g(e.substr(s))}),D("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[x]=g(e.substr(0,s)),t[T]=g(e.substr(s,2)),t[N]=g(e.substr(i))});k=de("Hours",!0);var at,ot={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ce,monthsShort:Ue,week:{dow:0,doy:6},weekdays:Je,weekdaysMin:Xe,weekdaysShort:Qe,meridiemParse:/[ap]\.?m?\.?/i},R={},ut={};function lt(e){return e&&e.toLowerCase().replace("_","-")}function ht(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=lt(e[r]).split("-")).length,n=(n=lt(e[r+1]))?n.split("-"):null;0<t;){if(s=dt(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&function(e,t){for(var n=Math.min(e.length,t.length),s=0;s<n;s+=1)if(e[s]!==t[s])return s;return n}(i,n)>=t-1)break;t--}r++}return at}function dt(t){var e;if(void 0===R[t]&&"undefined"!=typeof module&&module&&module.exports&&null!=t.match("^[^/\\\\]*$"))try{e=at._abbr,require("./locale/"+t),ct(e)}catch(e){R[t]=null}return R[t]}function ct(e,t){return e&&((t=o(t)?mt(e):ft(e,t))?at=t:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),at._abbr}function ft(e,t){if(null===t)return delete R[e],null;var n,s=ot;if(t.abbr=e,null!=R[e])Q("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=R[e]._config;else if(null!=t.parentLocale)if(null!=R[t.parentLocale])s=R[t.parentLocale]._config;else{if(null==(n=dt(t.parentLocale)))return ut[t.parentLocale]||(ut[t.parentLocale]=[]),ut[t.parentLocale].push({name:e,config:t}),null;s=n._config}return R[e]=new K(X(s,t)),ut[e]&&ut[e].forEach(function(e){ft(e.name,e.config)}),ct(e),R[e]}function mt(e){var t;if(!(e=e&&e._locale&&e._locale._abbr?e._locale._abbr:e))return at;if(!a(e)){if(t=dt(e))return t;e=[e]}return ht(e)}function _t(e){var t=e._a;return t&&-2===m(e).overflow&&(t=t[O]<0||11<t[O]?O:t[b]<1||t[b]>We(t[Y],t[O])?b:t[x]<0||24<t[x]||24===t[x]&&(0!==t[T]||0!==t[N]||0!==t[Ne])?x:t[T]<0||59<t[T]?T:t[N]<0||59<t[N]?N:t[Ne]<0||999<t[Ne]?Ne:-1,m(e)._overflowDayOfYear&&(t<Y||b<t)&&(t=b),m(e)._overflowWeeks&&-1===t&&(t=Pe),m(e)._overflowWeekday&&-1===t&&(t=Re),m(e).overflow=t),e}var yt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wt=/Z|[+-]\d\d(?::?\d\d)?/,pt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],kt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],vt=/^\/?Date\((-?\d+)/i,Mt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Dt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function St(e){var t,n,s,i,r,a,o=e._i,u=yt.exec(o)||gt.exec(o),o=pt.length,l=kt.length;if(u){for(m(e).iso=!0,t=0,n=o;t<n;t++)if(pt[t][1].exec(u[1])){i=pt[t][0],s=!1!==pt[t][2];break}if(null==i)e._isValid=!1;else{if(u[3]){for(t=0,n=l;t<n;t++)if(kt[t][1].exec(u[3])){r=(u[2]||" ")+kt[t][0];break}if(null==r)return void(e._isValid=!1)}if(s||null==r){if(u[4]){if(!wt.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),Tt(e)}else e._isValid=!1}}else e._isValid=!1}function Yt(e,t,n,s,i,r){e=[function(e){e=parseInt(e,10);{if(e<=49)return 2e3+e;if(e<=999)return 1900+e}return e}(e),Ue.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&e.push(parseInt(r,10)),e}function Ot(e){var t,n,s,i,r=Mt.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));r?(t=Yt(r[4],r[3],r[2],r[5],r[6],r[7]),n=r[1],s=t,i=e,n&&Qe.indexOf(n)!==new Date(s[0],s[1],s[2]).getDay()?(m(i).weekdayMismatch=!0,i._isValid=!1):(e._a=t,e._tzm=(n=r[8],s=r[9],i=r[10],n?Dt[n]:s?0:60*(((n=parseInt(i,10))-(s=n%100))/100)+s),e._d=Ze.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0)):e._isValid=!1}function bt(e,t,n){return null!=e?e:null!=t?t:n}function xt(e){var t,n,s,i,r,a,o,u,l,h,d,c=[];if(!e._d){for(s=e,i=new Date(f.now()),n=s._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()],e._w&&null==e._a[b]&&null==e._a[O]&&(null!=(i=(s=e)._w).GG||null!=i.W||null!=i.E?(u=1,l=4,r=bt(i.GG,s._a[Y],qe(W(),1,4).year),a=bt(i.W,1),((o=bt(i.E,1))<1||7<o)&&(h=!0)):(u=s._locale._week.dow,l=s._locale._week.doy,d=qe(W(),u,l),r=bt(i.gg,s._a[Y],d.year),a=bt(i.w,d.week),null!=i.d?((o=i.d)<0||6<o)&&(h=!0):null!=i.e?(o=i.e+u,(i.e<0||6<i.e)&&(h=!0)):o=u),a<1||a>P(r,u,l)?m(s)._overflowWeeks=!0:null!=h?m(s)._overflowWeekday=!0:(d=$e(r,a,o,u,l),s._a[Y]=d.year,s._dayOfYear=d.dayOfYear)),null!=e._dayOfYear&&(i=bt(e._a[Y],n[Y]),(e._dayOfYear>Ae(i)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),h=Ze(i,0,e._dayOfYear),e._a[O]=h.getUTCMonth(),e._a[b]=h.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=c[t]=n[t];for(;t<7;t++)e._a[t]=c[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[x]&&0===e._a[T]&&0===e._a[N]&&0===e._a[Ne]&&(e._nextDay=!0,e._a[x]=0),e._d=(e._useUTC?Ze:je).apply(null,c),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[x]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(m(e).weekdayMismatch=!0)}}function Tt(e){if(e._f===f.ISO_8601)St(e);else if(e._f===f.RFC_2822)Ot(e);else{e._a=[],m(e).empty=!0;for(var t,n,s,i,r,a=""+e._i,o=a.length,u=0,l=ae(e._f,e._locale).match(te)||[],h=l.length,d=0;d<h;d++)n=l[d],(t=(a.match(Oe(n,e))||[])[0])&&(0<(s=a.substr(0,a.indexOf(t))).length&&m(e).unusedInput.push(s),a=a.slice(a.indexOf(t)+t.length),u+=t.length),ie[n]?(t?m(e).empty=!1:m(e).unusedTokens.push(n),s=n,r=e,null!=(i=t)&&c(xe,s)&&xe[s](i,r._a,r,s)):e._strict&&!t&&m(e).unusedTokens.push(n);m(e).charsLeftOver=o-u,0<a.length&&m(e).unusedInput.push(a),e._a[x]<=12&&!0===m(e).bigHour&&0<e._a[x]&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[x]=function(e,t,n){if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((e=e.isPM(n))&&t<12&&(t+=12),t=e||12!==t?t:0):t}(e._locale,e._a[x],e._meridiem),null!==(o=m(e).era)&&(e._a[Y]=e._locale.erasConvertYear(o,e._a[Y])),xt(e),_t(e)}}function Nt(e){var t,n,s,i=e._i,r=e._f;if(e._locale=e._locale||mt(e._l),null===i||void 0===r&&""===i)return I({nullInput:!0});if("string"==typeof i&&(e._i=i=e._locale.preparse(i)),h(i))return new q(_t(i));if(V(i))e._d=i;else if(a(r))!function(e){var t,n,s,i,r,a,o=!1,u=e._f.length;if(0===u)return m(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<u;i++)r=0,a=!1,t=$({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Tt(t),A(t)&&(a=!0),r=(r+=m(t).charsLeftOver)+10*m(t).unusedTokens.length,m(t).score=r,o?r<s&&(s=r,n=t):(null==s||r<s||a)&&(s=r,n=t,a&&(o=!0));E(e,n||t)}(e);else if(r)Tt(e);else if(o(r=(i=e)._i))i._d=new Date(f.now());else V(r)?i._d=new Date(r.valueOf()):"string"==typeof r?(n=i,null!==(t=vt.exec(n._i))?n._d=new Date(+t[1]):(St(n),!1===n._isValid&&(delete n._isValid,Ot(n),!1===n._isValid&&(delete n._isValid,n._strict?n._isValid=!1:f.createFromInputFallback(n))))):a(r)?(i._a=G(r.slice(0),function(e){return parseInt(e,10)}),xt(i)):F(r)?(t=i)._d||(s=void 0===(n=ue(t._i)).day?n.date:n.day,t._a=G([n.year,n.month,s,n.hour,n.minute,n.second,n.millisecond],function(e){return e&&parseInt(e,10)}),xt(t)):u(r)?i._d=new Date(r):f.createFromInputFallback(i);return A(e)||(e._d=null),e}function Pt(e,t,n,s,i){var r={};return!0!==t&&!1!==t||(s=t,t=void 0),!0!==n&&!1!==n||(s=n,n=void 0),(F(e)&&L(e)||a(e)&&0===e.length)&&(e=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=i,r._l=n,r._i=e,r._f=t,r._strict=s,(i=new q(_t(Nt(i=r))))._nextDay&&(i.add(1,"d"),i._nextDay=void 0),i}function W(e,t,n,s){return Pt(e,t,n,s,!1)}f.createFromInputFallback=e("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),f.ISO_8601=function(){},f.RFC_2822=function(){};ge=e("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=W.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:I()}),we=e("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=W.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:I()});function Rt(e,t){var n,s;if(!(t=1===t.length&&a(t[0])?t[0]:t).length)return W();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}var Wt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ct(e){var e=ue(e),t=e.year||0,n=e.quarter||0,s=e.month||0,i=e.week||e.isoWeek||0,r=e.day||0,a=e.hour||0,o=e.minute||0,u=e.second||0,l=e.millisecond||0;this._isValid=function(e){var t,n,s=!1,i=Wt.length;for(t in e)if(c(e,t)&&(-1===S.call(Wt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[Wt[n]]){if(s)return!1;parseFloat(e[Wt[n]])!==g(e[Wt[n]])&&(s=!0)}return!0}(e),this._milliseconds=+l+1e3*u+6e4*o+1e3*a*60*60,this._days=+r+7*i,this._months=+s+3*n+12*t,this._data={},this._locale=mt(),this._bubble()}function Ut(e){return e instanceof Ct}function Ht(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ft(e,n){s(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+r(~~(e/60),2)+n+r(~~e%60,2)})}Ft("Z",":"),Ft("ZZ",""),v("Z",Ye),v("ZZ",Ye),D(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Vt(Ye,e)});var Lt=/([\+\-]|\d\d)/gi;function Vt(e,t){var t=(t||"").match(e);return null===t?null:0===(t=60*(e=((t[t.length-1]||[])+"").match(Lt)||["-",0,0])[1]+g(e[2]))?0:"+"===e[0]?t:-t}function Gt(e,t){var n;return t._isUTC?(t=t.clone(),n=(h(e)||V(e)?e:W(e)).valueOf()-t.valueOf(),t._d.setTime(t._d.valueOf()+n),f.updateOffset(t,!1),t):W(e).local()}function Et(e){return-Math.round(e._d.getTimezoneOffset())}function At(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}f.updateOffset=function(){};var It=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,jt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function C(e,t){var n,s=e,i=null;return Ut(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(i=It.exec(e))?(n="-"===i[1]?-1:1,s={y:0,d:g(i[b])*n,h:g(i[x])*n,m:g(i[T])*n,s:g(i[N])*n,ms:g(Ht(1e3*i[Ne]))*n}):(i=jt.exec(e))?(n="-"===i[1]?-1:1,s={y:Zt(i[2],n),M:Zt(i[3],n),w:Zt(i[4],n),d:Zt(i[5],n),h:Zt(i[6],n),m:Zt(i[7],n),s:Zt(i[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(t=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Gt(t,e),e.isBefore(t)?n=zt(e,t):((n=zt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(W(s.from),W(s.to)),(s={}).ms=t.milliseconds,s.M=t.months),i=new Ct(s),Ut(e)&&c(e,"_locale")&&(i._locale=e._locale),Ut(e)&&c(e,"_isValid")&&(i._isValid=e._isValid),i}function Zt(e,t){e=e&&parseFloat(e.replace(",","."));return(isNaN(e)?0:e)*t}function zt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function $t(s,i){return function(e,t){var n;return null===t||isNaN(+t)||(Q(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=e,e=t,t=n),qt(this,C(e,t),s),this}}function qt(e,t,n,s){var i=t._milliseconds,r=Ht(t._days),t=Ht(t._months);e.isValid()&&(s=null==s||s,t&&Ve(e,ce(e,"Month")+t*n),r&&fe(e,"Date",ce(e,"Date")+r*n),i&&e._d.setTime(e._d.valueOf()+i*n),s&&f.updateOffset(e,r||t))}C.fn=Ct.prototype,C.invalid=function(){return C(NaN)};Ce=$t(1,"add"),Je=$t(-1,"subtract");function Bt(e){return"string"==typeof e||e instanceof String}function Jt(e){return h(e)||V(e)||Bt(e)||u(e)||function(t){var e=a(t),n=!1;e&&(n=0===t.filter(function(e){return!u(e)&&Bt(t)}).length);return e&&n}(e)||function(e){var t,n,s=F(e)&&!L(e),i=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a=r.length;for(t=0;t<a;t+=1)n=r[t],i=i||c(e,n);return s&&i}(e)||null==e}function Qt(e,t){if(e.date()<t.date())return-Qt(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months"),t=t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(1+n,"months")-s);return-(n+t)||0}function Xt(e){return void 0===e?this._locale._abbr:(null!=(e=mt(e))&&(this._locale=e),this)}f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";Xe=e("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Kt(){return this._locale}var en=126227808e5;function tn(e,t){return(e%t+t)%t}function nn(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-en:new Date(e,t,n).valueOf()}function sn(e,t,n){return e<100&&0<=e?Date.UTC(e+400,t,n)-en:Date.UTC(e,t,n)}function rn(e,t){return t.erasAbbrRegex(e)}function an(){for(var e=[],t=[],n=[],s=[],i=this.eras(),r=0,a=i.length;r<a;++r)t.push(M(i[r].name)),e.push(M(i[r].abbr)),n.push(M(i[r].narrow)),s.push(M(i[r].name)),s.push(M(i[r].abbr)),s.push(M(i[r].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function on(e,t){s(0,[e,e.length],0,t)}function un(e,t,n,s,i){var r;return null==e?qe(this,s,i).year:(r=P(e,s,i),function(e,t,n,s,i){e=$e(e,t,n,s,i),t=Ze(e.year,0,e.dayOfYear);return this.year(t.getUTCFullYear()),this.month(t.getUTCMonth()),this.date(t.getUTCDate()),this}.call(this,e,t=r<t?r:t,n,s,i))}s("N",0,0,"eraAbbr"),s("NN",0,0,"eraAbbr"),s("NNN",0,0,"eraAbbr"),s("NNNN",0,0,"eraName"),s("NNNNN",0,0,"eraNarrow"),s("y",["y",1],"yo","eraYear"),s("y",["yy",2],0,"eraYear"),s("y",["yyy",3],0,"eraYear"),s("y",["yyyy",4],0,"eraYear"),v("N",rn),v("NN",rn),v("NNN",rn),v("NNNN",function(e,t){return t.erasNameRegex(e)}),v("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),D(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,s){s=n._locale.erasParse(e,s,n._strict);s?m(n).era=s:m(n).invalidEra=e}),v("y",Me),v("yy",Me),v("yyy",Me),v("yyyy",Me),v("yo",function(e,t){return t._eraYearOrdinalRegex||Me}),D(["y","yy","yyy","yyyy"],Y),D(["yo"],function(e,t,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Y]=n._locale.eraYearOrdinalParse(e,i):t[Y]=parseInt(e,10)}),s(0,["gg",2],0,function(){return this.weekYear()%100}),s(0,["GG",2],0,function(){return this.isoWeekYear()%100}),on("gggg","weekYear"),on("ggggg","weekYear"),on("GGGG","isoWeekYear"),on("GGGGG","isoWeekYear"),t("weekYear","gg"),t("isoWeekYear","GG"),n("weekYear",1),n("isoWeekYear",1),v("G",De),v("g",De),v("GG",p,w),v("gg",p,w),v("GGGG",ke,_e),v("gggg",ke,_e),v("GGGGG",ve,ye),v("ggggg",ve,ye),Te(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=g(e)}),Te(["gg","GG"],function(e,t,n,s){t[s]=f.parseTwoDigitYear(e)}),s("Q",0,"Qo","quarter"),t("quarter","Q"),n("quarter",7),v("Q",i),D("Q",function(e,t){t[O]=3*(g(e)-1)}),s("D",["DD",2],"Do","date"),t("date","D"),n("date",9),v("D",p),v("DD",p,w),v("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),D(["D","DD"],b),D("Do",function(e,t){t[b]=g(e.match(p)[0])});ke=de("Date",!0);s("DDD",["DDDD",3],"DDDo","dayOfYear"),t("dayOfYear","DDD"),n("dayOfYear",4),v("DDD",pe),v("DDDD",me),D(["DDD","DDDD"],function(e,t,n){n._dayOfYear=g(e)}),s("m",["mm",2],0,"minute"),t("minute","m"),n("minute",14),v("m",p),v("mm",p,w),D(["m","mm"],T);var ln,_e=de("Minutes",!1),ve=(s("s",["ss",2],0,"second"),t("second","s"),n("second",15),v("s",p),v("ss",p,w),D(["s","ss"],N),de("Seconds",!1));for(s("S",0,0,function(){return~~(this.millisecond()/100)}),s(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),s(0,["SSS",3],0,"millisecond"),s(0,["SSSS",4],0,function(){return 10*this.millisecond()}),s(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),s(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),s(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),s(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),s(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),t("millisecond","ms"),n("millisecond",16),v("S",pe,i),v("SS",pe,w),v("SSS",pe,me),ln="SSSS";ln.length<=9;ln+="S")v(ln,Me);function hn(e,t){t[Ne]=g(1e3*("0."+e))}for(ln="S";ln.length<=9;ln+="S")D(ln,hn);ye=de("Milliseconds",!1),s("z",0,0,"zoneAbbr"),s("zz",0,0,"zoneName");i=q.prototype;function dn(e){return e}i.add=Ce,i.calendar=function(e,t){1===arguments.length&&(arguments[0]?Jt(arguments[0])?(e=arguments[0],t=void 0):function(e){for(var t=F(e)&&!L(e),n=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i=0;i<s.length;i+=1)n=n||c(e,s[i]);return t&&n}(arguments[0])&&(t=arguments[0],e=void 0):t=e=void 0);var e=e||W(),n=Gt(e,this).startOf("day"),n=f.calendarFormat(this,n)||"sameElse",t=t&&(d(t[n])?t[n].call(this,e):t[n]);return this.format(t||this.localeData().calendar(n,this,W(e)))},i.clone=function(){return new q(this)},i.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Gt(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=_(t)){case"year":r=Qt(this,s)/12;break;case"month":r=Qt(this,s);break;case"quarter":r=Qt(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:y(r)},i.endOf=function(e){var t,n;if(void 0===(e=_(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?sn:nn,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-tn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-tn(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-tn(t,1e3)-1;break}return this._d.setTime(t),f.updateOffset(this,!0),this},i.format=function(e){return e=e||(this.isUtc()?f.defaultFormatUtc:f.defaultFormat),e=re(this,e),this.localeData().postformat(e)},i.from=function(e,t){return this.isValid()&&(h(e)&&e.isValid()||W(e).isValid())?C({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},i.fromNow=function(e){return this.from(W(),e)},i.to=function(e,t){return this.isValid()&&(h(e)&&e.isValid()||W(e).isValid())?C({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},i.toNow=function(e){return this.to(W(),e)},i.get=function(e){return d(this[e=_(e)])?this[e]():this},i.invalidAt=function(){return m(this).overflow},i.isAfter=function(e,t){return e=h(e)?e:W(e),!(!this.isValid()||!e.isValid())&&("millisecond"===(t=_(t)||"millisecond")?this.valueOf()>e.valueOf():e.valueOf()<this.clone().startOf(t).valueOf())},i.isBefore=function(e,t){return e=h(e)?e:W(e),!(!this.isValid()||!e.isValid())&&("millisecond"===(t=_(t)||"millisecond")?this.valueOf()<e.valueOf():this.clone().endOf(t).valueOf()<e.valueOf())},i.isBetween=function(e,t,n,s){return e=h(e)?e:W(e),t=h(t)?t:W(t),!!(this.isValid()&&e.isValid()&&t.isValid())&&(("("===(s=s||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===s[1]?this.isBefore(t,n):!this.isAfter(t,n)))},i.isSame=function(e,t){var e=h(e)?e:W(e);return!(!this.isValid()||!e.isValid())&&("millisecond"===(t=_(t)||"millisecond")?this.valueOf()===e.valueOf():(e=e.valueOf(),this.clone().startOf(t).valueOf()<=e&&e<=this.clone().endOf(t).valueOf()))},i.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},i.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},i.isValid=function(){return A(this)},i.lang=Xe,i.locale=Xt,i.localeData=Kt,i.max=we,i.min=ge,i.parsingFlags=function(){return E({},m(this))},i.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t,n=[];for(t in e)c(e,t)&&n.push({unit:t,priority:le[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}(e=ue(e)),s=n.length,i=0;i<s;i++)this[n[i].unit](e[n[i].unit]);else if(d(this[e=_(e)]))return this[e](t);return this},i.startOf=function(e){var t,n;if(void 0===(e=_(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?sn:nn,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=tn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=tn(t,6e4);break;case"second":t=this._d.valueOf(),t-=tn(t,1e3);break}return this._d.setTime(t),f.updateOffset(this,!0),this},i.subtract=Je,i.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},i.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},i.toDate=function(){return new Date(this.valueOf())},i.toISOString=function(e){if(!this.isValid())return null;var t=(e=!0!==e)?this.clone().utc():this;return t.year()<0||9999<t.year()?re(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):d(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",re(t,"Z")):re(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},i.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t="moment",n="";return this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",n="Z"),t="["+t+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(t+e+"-MM-DD[T]HH:mm:ss.SSS"+(n+'[")]'))},"undefined"!=typeof Symbol&&null!=Symbol.for&&(i[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),i.toJSON=function(){return this.isValid()?this.toISOString():null},i.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},i.unix=function(){return Math.floor(this.valueOf()/1e3)},i.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},i.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},i.eraName=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].name;if(t[n].until<=e&&e<=t[n].since)return t[n].name}return""},i.eraNarrow=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].narrow;if(t[n].until<=e&&e<=t[n].since)return t[n].narrow}return""},i.eraAbbr=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].abbr;if(t[n].until<=e&&e<=t[n].since)return t[n].abbr}return""},i.eraYear=function(){for(var e,t,n=this.localeData().eras(),s=0,i=n.length;s<i;++s)if(e=n[s].since<=n[s].until?1:-1,t=this.clone().startOf("day").valueOf(),n[s].since<=t&&t<=n[s].until||n[s].until<=t&&t<=n[s].since)return(this.year()-f(n[s].since).year())*e+n[s].offset;return this.year()},i.year=Ie,i.isLeapYear=function(){return he(this.year())},i.weekYear=function(e){return un.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},i.isoWeekYear=function(e){return un.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},i.quarter=i.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},i.month=Ge,i.daysInMonth=function(){return We(this.year(),this.month())},i.week=i.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},i.isoWeek=i.isoWeeks=function(e){var t=qe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},i.weeksInYear=function(){var e=this.localeData()._week;return P(this.year(),e.dow,e.doy)},i.weeksInWeekYear=function(){var e=this.localeData()._week;return P(this.weekYear(),e.dow,e.doy)},i.isoWeeksInYear=function(){return P(this.year(),1,4)},i.isoWeeksInISOWeekYear=function(){return P(this.isoWeekYear(),1,4)},i.date=ke,i.day=i.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,"d")):s},i.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},i.isoWeekday=function(e){return this.isValid()?null!=e?(t=e,n=this.localeData(),n="string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t,this.day(this.day()%7?n:n-7)):this.day()||7:null!=e?this:NaN;},i.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},i.hour=i.hours=k,i.minute=i.minutes=_e,i.second=i.seconds=ve,i.millisecond=i.milliseconds=ye,i.utcOffset=function(e,t,n){var s,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?i:Et(this);if("string"==typeof e){if(null===(e=Vt(Ye,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(s=Et(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?qt(this,C(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this},i.utc=function(e){return this.utcOffset(0,e)},i.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Et(this),"m")),this},i.parseZone=function(){var e;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(e=Vt(Se,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},i.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?W(e).utcOffset():0,(this.utcOffset()-e)%60==0)},i.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},i.isLocal=function(){return!!this.isValid()&&!this._isUTC},i.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},i.isUtc=At,i.isUTC=At,i.zoneAbbr=function(){return this._isUTC?"UTC":""},i.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},i.dates=e("dates accessor is deprecated. Use date instead.",ke),i.months=e("months accessor is deprecated. Use month instead",Ge),i.years=e("years accessor is deprecated. Use year instead",Ie),i.zone=e("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?(this.utcOffset(e="string"!=typeof e?-e:e,t),this):-this.utcOffset()}),i.isDSTShifted=e("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e,t={};return $(t,this),(t=Nt(t))._a?(e=(t._isUTC?l:W)(t._a),this._isDSTShifted=this.isValid()&&0<function(e,t,n){for(var s=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),r=0,a=0;a<s;a++)(n&&e[a]!==t[a]||!n&&g(e[a])!==g(t[a]))&&r++;return r+i}(t._a,e.toArray())):this._isDSTShifted=!1,this._isDSTShifted});w=K.prototype;function cn(e,t,n,s){var i=mt(),s=l().set(s,t);return i[n](s,e)}function fn(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return cn(e,t,n,"month");for(var s=[],i=0;i<12;i++)s[i]=cn(e,i,n,"month");return s}function mn(e,t,n,s){t=("boolean"==typeof e?u(t)&&(n=t,t=void 0):(t=e,e=!1,u(n=t)&&(n=t,t=void 0)),t||"");var i,r=mt(),a=e?r._week.dow:0,o=[];if(null!=n)return cn(t,(n+a)%7,s,"day");for(i=0;i<7;i++)o[i]=cn(t,(i+a)%7,s,"day");return o}w.calendar=function(e,t,n){return d(e=this._calendar[e]||this._calendar.sameElse)?e.call(t,n):e},w.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(te).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},w.invalidDate=function(){return this._invalidDate},w.ordinal=function(e){return this._ordinal.replace("%d",e)},w.preparse=dn,w.postformat=dn,w.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return d(i)?i(e,t,n,s):i.replace(/%d/i,e)},w.pastFuture=function(e,t){return d(e=this._relativeTime[0<e?"future":"past"])?e(t):e.replace(/%s/i,t)},w.set=function(e){var t,n;for(n in e)c(e,n)&&(d(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},w.eras=function(e,t){for(var n,s=this._eras||mt("en")._eras,i=0,r=s.length;i<r;++i){switch(typeof s[i].since){case"string":n=f(s[i].since).startOf("day"),s[i].since=n.valueOf();break}switch(typeof s[i].until){case"undefined":s[i].until=1/0;break;case"string":n=f(s[i].until).startOf("day").valueOf(),s[i].until=n.valueOf();break}}return s},w.erasParse=function(e,t,n){var s,i,r,a,o,u=this.eras();for(e=e.toUpperCase(),s=0,i=u.length;s<i;++s)if(r=u[s].name.toUpperCase(),a=u[s].abbr.toUpperCase(),o=u[s].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return u[s];break;case"NNNN":if(r===e)return u[s];break;case"NNNNN":if(o===e)return u[s];break}else if(0<=[r,a,o].indexOf(e))return u[s]},w.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?f(e.since).year():f(e.since).year()+(t-e.offset)*n},w.erasAbbrRegex=function(e){return c(this,"_erasAbbrRegex")||an.call(this),e?this._erasAbbrRegex:this._erasRegex},w.erasNameRegex=function(e){return c(this,"_erasNameRegex")||an.call(this),e?this._erasNameRegex:this._erasRegex},w.erasNarrowRegex=function(e){return c(this,"_erasNarrowRegex")||an.call(this),e?this._erasNarrowRegex:this._erasRegex},w.months=function(e,t){return e?(a(this._months)?this._months:this._months[(this._months.isFormat||He).test(t)?"format":"standalone"])[e.month()]:a(this._months)?this._months:this._months.standalone},w.monthsShort=function(e,t){return e?(a(this._monthsShort)?this._monthsShort:this._monthsShort[He.test(t)?"format":"standalone"])[e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},w.monthsParse=function(e,t,n){var s,i;if(this._monthsParseExact)return function(e,t,n){var s,i,r,e=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=l([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=S.call(this._shortMonthsParse,e))?i:null:-1!==(i=S.call(this._longMonthsParse,e))?i:null:"MMM"===t?-1!==(i=S.call(this._shortMonthsParse,e))||-1!==(i=S.call(this._longMonthsParse,e))?i:null:-1!==(i=S.call(this._longMonthsParse,e))||-1!==(i=S.call(this._shortMonthsParse,e))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=l([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(i="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},w.monthsRegex=function(e){return this._monthsParseExact?(c(this,"_monthsRegex")||Ee.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Le),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},w.monthsShortRegex=function(e){return this._monthsParseExact?(c(this,"_monthsRegex")||Ee.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=Fe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},w.week=function(e){return qe(e,this._week.dow,this._week.doy).week},w.firstDayOfYear=function(){return this._week.doy},w.firstDayOfWeek=function(){return this._week.dow},w.weekdays=function(e,t){return t=a(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"],!0===e?Be(t,this._week.dow):e?t[e.day()]:t},w.weekdaysMin=function(e){return!0===e?Be(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},w.weekdaysShort=function(e){return!0===e?Be(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},w.weekdaysParse=function(e,t,n){var s,i;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,e=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=l([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=S.call(this._weekdaysParse,e))?i:null:"ddd"===t?-1!==(i=S.call(this._shortWeekdaysParse,e))?i:null:-1!==(i=S.call(this._minWeekdaysParse,e))?i:null:"dddd"===t?-1!==(i=S.call(this._weekdaysParse,e))||-1!==(i=S.call(this._shortWeekdaysParse,e))||-1!==(i=S.call(this._minWeekdaysParse,e))?i:null:"ddd"===t?-1!==(i=S.call(this._shortWeekdaysParse,e))||-1!==(i=S.call(this._weekdaysParse,e))||-1!==(i=S.call(this._minWeekdaysParse,e))?i:null:-1!==(i=S.call(this._minWeekdaysParse,e))||-1!==(i=S.call(this._weekdaysParse,e))||-1!==(i=S.call(this._shortWeekdaysParse,e))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=l([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(i="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},w.weekdaysRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||nt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Ke),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},w.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||nt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=et),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},w.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||nt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=tt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},w.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},w.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},ct("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===g(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),f.lang=e("moment.lang is deprecated. Use moment.locale instead.",ct),f.langData=e("moment.langData is deprecated. Use moment.localeData instead.",mt);var _n=Math.abs;function yn(e,t,n,s){t=C(t,n);return e._milliseconds+=s*t._milliseconds,e._days+=s*t._days,e._months+=s*t._months,e._bubble()}function gn(e){return e<0?Math.floor(e):Math.ceil(e)}function wn(e){return 4800*e/146097}function pn(e){return 146097*e/4800}function kn(e){return function(){return this.as(e)}}pe=kn("ms"),me=kn("s"),Ce=kn("m"),we=kn("h"),ge=kn("d"),Je=kn("w"),k=kn("M"),_e=kn("Q"),ve=kn("y");function vn(e){return function(){return this.isValid()?this._data[e]:NaN}}var ye=vn("milliseconds"),ke=vn("seconds"),Ie=vn("minutes"),w=vn("hours"),Mn=vn("days"),Dn=vn("months"),Sn=vn("years");var Yn=Math.round,On={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function bn(e,t,n,s){var i=C(e).abs(),r=Yn(i.as("s")),a=Yn(i.as("m")),o=Yn(i.as("h")),u=Yn(i.as("d")),l=Yn(i.as("M")),h=Yn(i.as("w")),i=Yn(i.as("y")),r=(r<=n.ss?["s",r]:r<n.s&&["ss",r])||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||u<=1&&["d"]||u<n.d&&["dd",u];return(r=(r=null!=n.w?r||h<=1&&["w"]||h<n.w&&["ww",h]:r)||l<=1&&["M"]||l<n.M&&["MM",l]||i<=1&&["y"]||["yy",i])[2]=t,r[3]=0<+e,r[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,r)}var xn=Math.abs;function Tn(e){return(0<e)-(e<0)||+e}function Nn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,s,i,r,a,o=xn(this._milliseconds)/1e3,u=xn(this._days),l=xn(this._months),h=this.asSeconds();return h?(e=y(o/60),t=y(e/60),o%=60,e%=60,n=y(l/12),l%=12,s=o?o.toFixed(3).replace(/\.?0+$/,""):"",i=Tn(this._months)!==Tn(h)?"-":"",r=Tn(this._days)!==Tn(h)?"-":"",a=Tn(this._milliseconds)!==Tn(h)?"-":"",(h<0?"-":"")+"P"+(n?i+n+"Y":"")+(l?i+l+"M":"")+(u?r+u+"D":"")+(t||e||o?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(o?a+s+"S":"")):"P0D"}var U=Ct.prototype;return U.isValid=function(){return this._isValid},U.abs=function(){var e=this._data;return this._milliseconds=_n(this._milliseconds),this._days=_n(this._days),this._months=_n(this._months),e.milliseconds=_n(e.milliseconds),e.seconds=_n(e.seconds),e.minutes=_n(e.minutes),e.hours=_n(e.hours),e.months=_n(e.months),e.years=_n(e.years),this},U.add=function(e,t){return yn(this,e,t,1)},U.subtract=function(e,t){return yn(this,e,t,-1)},U.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=_(e))||"quarter"===e||"year"===e)switch(t=this._days+s/864e5,n=this._months+wn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(pn(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},U.asMilliseconds=pe,U.asSeconds=me,U.asMinutes=Ce,U.asHours=we,U.asDays=ge,U.asWeeks=Je,U.asMonths=k,U.asQuarters=_e,U.asYears=ve,U.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12):NaN},U._bubble=function(){var e=this._milliseconds,t=this._days,n=this._months,s=this._data;return 0<=e&&0<=t&&0<=n||e<=0&&t<=0&&n<=0||(e+=864e5*gn(pn(n)+t),n=t=0),s.milliseconds=e%1e3,e=y(e/1e3),s.seconds=e%60,e=y(e/60),s.minutes=e%60,e=y(e/60),s.hours=e%24,t+=y(e/24),n+=e=y(wn(t)),t-=gn(pn(e)),e=y(n/12),n%=12,s.days=t,s.months=n,s.years=e,this},U.clone=function(){return C(this)},U.get=function(e){return e=_(e),this.isValid()?this[e+"s"]():NaN},U.milliseconds=ye,U.seconds=ke,U.minutes=Ie,U.hours=w,U.days=Mn,U.weeks=function(){return y(this.days()/7)},U.months=Dn,U.years=Sn,U.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,s=On;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(n=e),"object"==typeof t&&(s=Object.assign({},On,t),null!=t.s&&null==t.ss&&(s.ss=t.s-1)),e=this.localeData(),t=bn(this,!n,s,e),n&&(t=e.pastFuture(+this,t)),e.postformat(t)},U.toISOString=Nn,U.toString=Nn,U.toJSON=Nn,U.locale=Xt,U.localeData=Kt,U.toIsoString=e("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Nn),U.lang=Xe,s("X",0,0,"unix"),s("x",0,0,"valueOf"),v("x",De),v("X",/[+-]?\d+(\.\d{1,3})?/),D("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),D("x",function(e,t,n){n._d=new Date(g(e))}),f.version="2.29.4",H=W,f.fn=i,f.min=function(){return Rt("isBefore",[].slice.call(arguments,0))},f.max=function(){return Rt("isAfter",[].slice.call(arguments,0))},f.now=function(){return Date.now?Date.now():+new Date},f.utc=l,f.unix=function(e){return W(1e3*e)},f.months=function(e,t){return fn(e,t,"months")},f.isDate=V,f.locale=ct,f.invalid=I,f.duration=C,f.isMoment=h,f.weekdays=function(e,t,n){return mn(e,t,n,"weekdays")},f.parseZone=function(){return W.apply(null,arguments).parseZone()},f.localeData=mt,f.isDuration=Ut,f.monthsShort=function(e,t){return fn(e,t,"monthsShort")},f.weekdaysMin=function(e,t,n){return mn(e,t,n,"weekdaysMin")},f.defineLocale=ft,f.updateLocale=function(e,t){var n,s;return null!=t?(s=ot,null!=R[e]&&null!=R[e].parentLocale?R[e].set(X(R[e]._config,t)):(t=X(s=null!=(n=dt(e))?n._config:s,t),null==n&&(t.abbr=e),(s=new K(t)).parentLocale=R[e],R[e]=s),ct(e)):null!=R[e]&&(null!=R[e].parentLocale?(R[e]=R[e].parentLocale,e===ct()&&ct(e)):null!=R[e]&&delete R[e]),R[e]},f.locales=function(){return ee(R)},f.weekdaysShort=function(e,t,n){return mn(e,t,n,"weekdaysShort")},f.normalizeUnits=_,f.relativeTimeRounding=function(e){return void 0===e?Yn:"function"==typeof e&&(Yn=e,!0)},f.relativeTimeThreshold=function(e,t){return void 0!==On[e]&&(void 0===t?On[e]:(On[e]=t,"s"===e&&(On.ss=t-1),!0))},f.calendarFormat=function(e,t){return(e=e.diff(t,"days",!0))<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse"},f.prototype=i,f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},f});
</script>

<script>
  /* global moment */
'use strict';

(function (window) {
  const NewDate = function (...args) {
    const _date = moment(...args);

    Object.defineProperty(this, 'isANewDateObject', {
      get: function () {
        return true;
      },
    });

    /**
     * Format date by the given pattern
     * @param {string} format Pattern to parse the date
     * @returns {string} Formatted date
     */
    this.formatDate = function (format) {
      return _date.format(format);
    };

    /**
     * Return numeric value of the unit of the date
     * @param {('year'|'month'|'date'|'day')} unit
     * @returns {number}
     */
    this.getDate = function (unit) {
      let value = _date.get(unit);
      if (unit === 'month') {
        value += 1;
      }
      return value;
    };

    /**
     * Mutate the original date by adding time
     * @param {number} number
     * @param {string} string
     * @returns Date object
     */
    this.addDate = function (...args) {
      _date.add(...args);
      return this;
    };

    /**
     * Get the number of days in the month
     * @returns {number} Number of days
     */
    this.daysInMonthDate = function () {
      return _date.daysInMonth();
    };

    /**
     * Clone a date object, since all dates are mutable
     * @param  {...any} args
     * @returns {object}
     */
    this.cloneDate = function (...args) {
      var copy = _date.clone(...args);
      return new NewDate(copy);
    };

    /**
     * Mutate the original date by subtracting time
     * @param  {number} number
     * @param  {string} string
     * @returns Date object
     */
    this.subtractDate = function (...args) {
      _date.subtract(...args);
      return this;
    };

    /**
     * Difference between two dates, (this - arg)
     * @param {string} dateB Second date
     * @param {string} unit Unit of measurement of the difference
     * @returns {number} Difference
     */
    this.diffDate = function (dateB, ...args) {
      let _dateB;
      if (typeof dateB === 'object' && dateB.isANewDateObject) {
        _dateB = dateB.formatDate();
      } else {
        _dateB = dateB;
      }
      return _date.diff(_dateB, ...args);
    };
  };

  const Dates = function () {
    /**
     * Format date by the given pattern
     * @param {string} date Date to format
     * @param {string} format Pattern
     * @returns {string} Formatted date
     */
    this.formatOnce = function (date, format) {
      return moment(date).format(format);
    };

    /**
     * Difference between two dates, (A - B)
     * @param {string} dateA First date
     * @param {string} dateB Second date
     * @param {string} unit Unit of measurement of the difference
     * @returns {number} Difference
     */
    this.diffOnce = function (dateA, dateB, unit) {
      return moment(dateA).diff(dateB, unit);
    };

    /**
     * Check if date is valid
     * @param {string} date Date to check
     * @param {string} format Pattern to parse the date
     * @returns {boolean} True if valid
     */
    this.isValid = function (date, format) {
      return moment(date, format).isValid();
    };

    /**
     * Returns the list of weekdays (3 letters each)
     * @returns {Array<string>} Array of strings
     */
    this.weekdaysShort = function () {
      return moment.weekdaysShort();
    };

    this.newDate = function (date, format) {
      return new NewDate(date, format);
    };
  };

  window.dates = new Dates();
})(window);

</script>

<script>
  /* jshint unused:false */
/* eslint no-unused-vars: "off" */
'use strict';

const VERSION = '';
const NAMESPACE = 'periodTracker';

const DEFAULT_USER_SETTINGS = {
  startDayOfWeek: 1, // 0 Sunday, 1 Monday, 6 Saturday
  showExtendedMonth: false,
  periodLength: 4,
  cycleLength: 28,
};

const FEATURES = {
  offline: false,
};

const FILE = {
  name: 'period-tracker_${now}.txt',
  title: 'Period Tracker Backup ${now}',
};

Object.freeze(DEFAULT_USER_SETTINGS);
Object.freeze(FEATURES);
Object.freeze(FILE);
</script>

<script>
  /* exported $, $$ */
/* global dates */
'use strict';

var $ = document.querySelectorAll.bind(document);
var $$ = document.querySelector.bind(document);
Element.prototype.on = Element.prototype.addEventListener;

// https://developer.mozilla.org/en/docs/Web/API/NodeList
NodeList.prototype.forEach = Array.prototype.forEach;

(function (window) {
  var Helpers = function () {
    const _datePattern = 'YYYY-MM-DD';
    const _today = dates.newDate();
    const _todayStr = _today.formatDate(_datePattern);

    const _notSupported =
      'This functionality is not supported in your browser/os/device';

    Object.defineProperty(this, 'today', {
      get: function () {
        return _today;
      },
    });

    Object.defineProperty(this, 'todayStr', {
      get: function () {
        return _todayStr;
      },
    });

    Object.defineProperty(this, 'datePattern', {
      get: function () {
        return _datePattern;
      },
    });

    /**
     * Convert number into two digit string
     * @param {number} n
     * @returns {string}
     */
    this.z = function (n) {
      if (typeof n === 'string') {
        if (n === '') {
          return n;
        }
        const n2 = Number(n);
        if (Number.isNaN(n2)) {
          return n;
        }
        n = n2;
      }
      if (typeof n === 'number') {
        if (n > 0 && n < 10) {
          return '0' + n;
        }
        return '' + n;
      }
      return n;
    };

    /**
     * Attach a handler to event for all elements that match the selector,
     * now or in the future, based on a root element
     */
    this.$delegate = function (target, selector, type, handler) {
      function dispatchEvent(event) {
        var el = event.target;
        var els = [];
        var found = false;
        var hasMatch;
        var potentialElements = target.querySelectorAll(selector);
        while (el) {
          els.unshift(el);
          hasMatch = Array.prototype.indexOf.call(potentialElements, el) >= 0;
          if (hasMatch) {
            found = true;
            break;
          }
          el = el.parentNode;
        }
        if (found) {
          handler.call(el);
        }
      }

      // https://developer.mozilla.org/en-US/docs/Web/Events/blur
      var useCapture = type === 'blur' || type === 'focus';

      target.addEventListener(type, dispatchEvent, !!useCapture);
    };

    /**
     * Download a file with the given name and content, this is for old browsers
     * @param {string} filename - name of the file
     * @param {string} text - content of the file
     */
    const oldDownload = function (filename, text) {
      var el = document.createElement('a');
      el.setAttribute(
        'href',
        'data:text/plain;charset=utf-8,' + encodeURIComponent(text)
      );
      el.setAttribute('download', filename);

      el.style.display = 'none';
      document.body.appendChild(el);

      el.click();

      document.body.removeChild(el);
    };

    /**
     * Read content from uploaded file
     * @param {object} file
     * @returns {Promise} promise with the content
     */
    this.readFromInputFile = async function (file) {
      if (!('FileReader' in window)) {
        throw _notSupported;
      }

      const reader = new FileReader();
      if (file) {
        reader.readAsText(file);
      }

      return new Promise((resolve) => {
        reader.addEventListener(
          'load',
          function () {
            resolve(reader.result);
          },
          false
        );
      });
    };

    /**
     * Write content into file
     * @param {string} filename - name of the file
     * @param {string} text - content of the file
     * @returns {Promise}
     */
    this.writeToFile = async function (filename, text) {
      if (!('showSaveFilePicker' in window)) {
        oldDownload(filename, text);
        return;
      }

      const options = {
        suggestedName: filename,
        types: [{ accept: { 'text/plain': ['.txt'] } }],
      };

      try {
        const fileHandle = await window.showSaveFilePicker(options);
        const writable = await fileHandle.createWritable();
        await writable.write(text);
        await writable.close();
      } catch (e) {
        // if the user doesn't save the file, swallow the relative browser error
      }
    };

    /**
     * Share content to other apps
     * @param {string} filename - name of the file
     * @param {string} text - content of the file
     * @param {string} title - title of the file
     */
    this.shareTo = function (filename, text, title) {
      const file = new File([text], filename, { type: 'text/plain' });
      const isFirefox = navigator.userAgent.indexOf('Firefox') !== -1;

      // Firefox has a bug where text is not actually shared, and
      // sharing of files is not supported at all, so functionality is
      // totally disabled for it
      // https://github.com/mozilla-mobile/fenix/issues/11946
      if (navigator.canShare && !isFirefox) {
        const sharedObj = {
          title: title,
        };

        if (navigator.canShare({ files: [file] })) {
          sharedObj.files = [file];
        } else if (navigator.canShare({ text: text })) {
          sharedObj.text = text;
        }

        navigator.share(sharedObj).catch(() => {
          // if the user doesn't share the file, swallow the relative browser error
        });
      } else {
        throw _notSupported;
      }
    };

    /**
     * Create a unique identifier
     */
    this.uid = function () {
      return `${performance.now()}${Math.random()
        .toString()
        .replace('0.', '')}`.replace('.', '');
    };
  };

  window.helpers = new Helpers();
})(window);

</script>

<script>
  'use strict';

(function (window) {
  var Storage = function (namespace) {
    var capitalize = function (string) {
      if (string === '') {
        return string;
      }
      return string[0].toUpperCase() + string.substring(1);
    };

    /**
     * Load from localStorage
     * @returns {object}
     */
    this.getItem = function (key) {
      try {
        return JSON.parse(localStorage.getItem(namespace + capitalize(key)));
      } catch (e) {
        console.error(e);
        return {};
      }
    };

    /**
     * Save to localStorage
     * @returns {boolean} True if save was successful
     */
    this.setItem = function (key, data) {
      try {
        localStorage.setItem(namespace + capitalize(key), JSON.stringify(data));
        return true;
      } catch (e) {
        console.error(e);
        return false;
      }
    };

    /**
     * Remove item from localStorage
     * @returns {object}
     */
    this.removeItem = function (key) {
      try {
        return localStorage.removeItem(namespace + capitalize(key));
      } catch (e) {
        console.error(e);
        return false;
      }
    };

    /**
     * Clear all items of the namespace
     */
    this.clear = function () {
      Object.keys(localStorage).forEach((key) => {
        if (key.indexOf(namespace) === 0) {
          localStorage.removeItem(key);
        }
      });
    };
  };

  // export to window
  window.app = window.app || {};
  window.app.Storage = Storage;
})(window);

</script>

<script>
  'use strict';

(function (window) {
  var Config = function (defaultOpts, storage) {
    var _options = { ...defaultOpts };

    // merge storage settings into default settings
    merge(load());

    /**
     * Merge source into _options, but only for the properties already defined in _options
     * @param {object} source
     */
    function merge(source) {
      for (const key of Object.keys(source)) {
        if (Object.prototype.hasOwnProperty.call(_options, key)) {
          _options[key] = source[key];
        }
      }
    }

    /**
     * Load from storage
     * @returns {object}
     */
    function load() {
      return storage.getItem('config') || {};
    }

    /**
     * Save to storage
     * @returns {boolean} True if save was successful
     */
    function save() {
      storage.setItem('config', _options);
    }

    /**
     * Update the properties of the setting passed by
     * @param {object} data
     */
    this.update = function (data) {
      merge(data);
      save();
    };

    /**
     * Reset the settings to default
     */
    this.reset = function () {
      merge(defaultOpts);
      save();
    };

    /**
     * Get option value
     * @param {string} key
     * @return {number|string}
     */
    this.get = function (key) {
      if (Object.prototype.hasOwnProperty.call(_options, key)) {
        return _options[key];
      }
      return undefined;
    };

    /**
     * Return all options
     * @return {object}
     */
    this.getAll = function () {
      return { ..._options };
    };
  };

  // export to window
  window.app = window.app || {};
  window.app.Config = Config;
})(window);

</script>

<script>

  /* global dates, helpers */
'use strict';

(function (window) {
  // this regexp is not strict as the date validation will be performed by dates object
  const dateRegExp = new RegExp(/^\d{4}-\d{2}-\d{2}$/);
  const averageIntervals = 3;

  var Model = function (config, storage) {
    var _self = this;
    _self.config = config;

    var todayStr = helpers.todayStr;
    var _list = [];
    var _quicklist = [];
    var _intervals = [];
    var _average = 0;
    var _next = '';
    var _countdown = 0;
    var _counter = 0;

    Object.defineProperty(this, 'list', {
      get: function () {
        return _list;
      },
    });

    Object.defineProperty(this, 'quicklist', {
      get: function () {
        return _quicklist;
      },
    });

    Object.defineProperty(this, 'intervals', {
      get: function () {
        return _intervals;
      },
    });

    Object.defineProperty(this, 'average', {
      get: function () {
        return _average;
      },
    });

    Object.defineProperty(this, 'next', {
      get: function () {
        return _next;
      },
    });

    Object.defineProperty(this, 'countdown', {
      get: function () {
        return _countdown;
      },
    });

    Object.defineProperty(this, 'counter', {
      get: function () {
        return _counter;
      },
    });

    /**
     * Sort dates in descending order
     */
    var sortDesc = function () {
      _list.sort(function (a, b) {
        if (a.date < b.date) {
          return 1;
        }
        if (a.date > b.date) {
          return -1;
        }
        return 0;
      });
    };

    /**
     * Check if date is valid
     * @returns {boolean}
     */
    var isValidDate = function (date) {
      // check if the pattern is ok
      if (!dateRegExp.test(date)) {
        return false;
      }
      // check if the date is actually valid
      return dates.isValid(date, helpers.datePattern);
    };

    /**
     * Find occurance by id
     * @param {string} id - id of the occurance to find
     * @returns {number} -1 if not found, otherwise index number of the element
     */
    var findById = function (id) {
      var index = -1;
      for (var i = 0; i < _list.length; i++) {
        if (id === _list[i].id) {
          index = i;
          break;
        }
      }
      return index;
    };

    /**
     * Find occurance by date
     * @param {string} date - string in YYYY-DD-MM format
     * @returns {number} -1 if not found, otherwise index number of the element
     */
    var findByDate = function (date) {
      var index = -1;
      for (var i = 0; i < _list.length; i++) {
        if (date === _list[i].date) {
          index = i;
          break;
        }
      }
      return index;
    };

    /**
     * Add single occurance
     * @param {string} date - string in YYYY-DD-MM format
     * @returns {number} -1 if not successful, otherwise the added element
     */
    var add = function (date) {
      if (!isValidDate(date)) {
        return -1;
      }
      if (findByDate(date) !== -1) {
        return -1;
      }
      var now = dates.newDate().formatDate();
      var id = helpers.uid();
      var newItem = {
        id: id,
        date: date,
        created: now,
        updated: now,
      };
      _list.unshift(newItem);
      sortDesc();
      return newItem;
    };

    /**
     * Change single occurance
     * @param {string} id - id of the occurance to edit
     * @param {string} date - string in YYYY-DD-MM format
     * @returns {number|object} -1 if not successful, otherwise the updated element
     */
    var edit = function (id, date) {
      if (!isValidDate(date)) {
        return -1;
      }
      var indexById = findById(id);
      if (indexById === -1) {
        return -1;
      }
      if (findByDate(date) !== -1) {
        return -1;
      }
      var el = _list[indexById];
      el.date = date;
      el.updated = dates.newDate().formatDate();
      sortDesc();
      return el;
    };

    /**
     * Remove single occurance
     * @param {string} id - id of the occurance to remove
     * @returns {number|object} -1 if not successful, otherwise the removed element
     */
    var remove = function (id) {
      var index = findById(id);
      if (index === -1) {
        return -1;
      }
      var removed = _list.splice(index, 1);
      return removed[0];
    };

    /**
     * Remove all occurances
     * @returns {number|object} -1 if data was already empty, otherwise the removed elements
     */
    var clear = function () {
      var removed = -1;
      if (_list.length > 0) {
        removed = _list.splice(0);
      }
      return removed;
    };

    /**
     * Replace all occurances with passed list
     * @param {array} newList - new list of occurances
     * @returns {array}
     */
    var update = function (newList) {
      _list = [...newList];
      return _list;
    };

    /**
     * Modify occurances
     * @param {string} how - How to change
     * @param {string} id - id of the occurance
     * @param {string} date - string in YYYY-DD-MM format
     * @param {array} list - new list
     * @returns {number|object} -1 if not successful, otherwise the affected elements
     */
    var modify = function (how, id, date, list) {
      var mod = -1;
      if (how === 'add') {
        mod = add(date);
      }
      if (how === 'edit') {
        mod = edit(id, date);
      }
      if (how === 'remove') {
        mod = remove(id);
      }
      if (how === 'clear') {
        mod = clear();
      }
      if (how === 'update') {
        mod = update(list);
      }
      if (mod !== -1) {
        calcAll();
        if (save()) {
          return mod;
        }
        return -1;
      }
      return -1;
    };

    /**
     * Create a simple array of only dates
     */
    var calcQuicklist = function () {
      _quicklist = [];
      _list.forEach(function (item) {
        _quicklist.push(item.date);
      });
    };

    /**
     * Calculate interval in days between occurances
     */
    var calcIntervals = function () {
      _intervals = [];
      for (var i = 1; i < _list.length; i++) {
        var diff = dates.diffOnce(_list[i - 1].date, _list[i].date, 'days');
        _intervals.push(diff);
      }
    };

    /**
     * Calculate average interval in days between occurances
     */
    var calcAverage = function () {
      var arr = _intervals.slice(0, averageIntervals);
      if (!arr.length) {
        _average = _self.config.get('cycleLength');
        return;
      }
      var sum = 0;
      for (var i = 0; i < arr.length; i++) {
        sum += arr[i];
      }
      _average = Math.round(sum / arr.length);
    };

    /**
     * Calculate next occurance
     */
    var calcNext = function () {
      var last = todayStr;
      var lastItem = _list[0];
      if (lastItem) {
        last = lastItem.date;
      }
      if (_list.length) {
        _next = dates
          .newDate(last)
          .addDate(_average, 'days')
          .formatDate(helpers.datePattern);
      } else {
        _next = '';
      }
    };

    /**
     * Caldulate how many days left until next occurance
     */
    var calcCountdown = function () {
      if (_next) {
        _countdown = dates.diffOnce(_next, todayStr, 'days');
        _counter = _average - _countdown + 1;
      } else {
        _countdown = 0;
        _counter = 0;
      }
    };

    /**
     * Do all calculations
     */
    var calcAll = function () {
      calcQuicklist();
      calcIntervals();
      calcAverage();
      calcNext();
      calcCountdown();
    };

    /**
     * Load from storage
     * @returns {boolean} True if load was successful
     */
    var load = function () {
      _list = storage.getItem('') || [];
    };

    /**
     * Save to storage
     * @returns {boolean} True if save was successful
     */
    var save = function () {
      return storage.setItem('', _list);
    };

    /**
     * Init data
     * @returns {array}
     */
    this.init = function () {
      load();
      calcAll();
    };

    /**
     * Recalc data
     */
    this.calc = function () {
      calcAll();
    };

    /**
     * Add single occurance
     * @param {string} date - string in YYYY-DD-MM format
     * @returns {number|object} -1 if not successful, otherwise the affected elements
     */
    this.add = function (date) {
      return modify('add', null, date);
    };

    /**
     * Edit single occurance
     * @param {string} id - id of the occurance to edit
     * @param {string} date - string in YYYY-DD-MM format
     * @returns {number|object} -1 if not successful, otherwise the affected elements
     */
    this.edit = function (id, date) {
      return modify('edit', id, date);
    };

    /**
     * Delete single occurance
     * @param {string} id - id of the occurance to remove
     * @returns {number|object} -1 if not successful, otherwise the affected elements
     */
    this.remove = function (id) {
      return modify('remove', id);
    };

    /**
     * Delete all occurances
     * @returns {number|object} -1 if not successful, otherwise the affected elements
     */
    this.clear = function () {
      return modify('clear');
    };

    /**
     * Replace list
     * @param {array} list
     * @returns {array} -1 if not successful, otherwise the new list
     */
    this.update = function (list) {
      return modify('update', null, null, list);
    };

    /**
     * Return item selected by id
     * @param {string} id
     * @returns {number|object} -1 if not successful, otherwise the selected item
     */
    this.getById = function (id) {
      var indexById = findById(id);
      if (indexById === -1) {
        return -1;
      }
      return _list[indexById];
    };

    this.init();
  };

  // export to window
  window.app = window.app || {};
  window.app.Model = Model;
})(window);

</script>

<script>
  /* global dates, helpers */
'use strict';

(function (window) {
  const Calendar = function () {
    /**
     * @param {number} startDayOfWeek - 0 Sunday, 1 Monday, 6 Saturday
     * @param {number} selectedMonthN - Selected month number, 1 or 2 digits no zero leading
     * @param {number} selectedYearN - Selected year number, 4 digits
     */
    this._calendarChrome = (startDayOfWeek, selectedMonthN, selectedYearN) => {
      // rearrange weekday names starting from our own first day of the week
      const week = dates.weekdaysShort();
      let weekTitle = week.slice(0);
      const leftoverWeek = weekTitle.splice(0, startDayOfWeek);
      weekTitle = weekTitle.concat(leftoverWeek);

      const selectedMonthYear = dates.newDate(
        `${selectedYearN}-${selectedMonthN}`,
        'YYYY-M'
      );
      const title = selectedMonthYear.formatDate('MMMM YYYY');

      // previous and next month data for nav links
      const nextMonth = selectedMonthYear.cloneDate().addDate(1, 'months');
      const prevMonth = selectedMonthYear.cloneDate().addDate(-1, 'months');
      const nextMonthObj = {
        monthN: nextMonth.getDate('month'),
        yearN: nextMonth.getDate('year'),
        title: nextMonth.formatDate('MMMM YYYY'),
      };
      const prevMonthObj = {
        daysInMonth: prevMonth.daysInMonthDate(),
        monthN: prevMonth.getDate('month'),
        yearN: prevMonth.getDate('year'),
        title: prevMonth.formatDate('MMMM YYYY'),
      };

      // previous and next year data for nav links
      const nextYear = selectedMonthYear.cloneDate().addDate(1, 'years');
      const prevYear = selectedMonthYear.cloneDate().addDate(-1, 'years');
      const nextYearObj = {
        monthN: nextYear.getDate('month'),
        yearN: nextYear.getDate('year'),
        title: nextYear.formatDate('MMMM YYYY'),
      };
      const prevYearObj = {
        monthN: prevYear.getDate('month'),
        yearN: prevYear.getDate('year'),
        title: prevYear.formatDate('MMMM YYYY'),
      };

      // current month and year data for today link
      const todayObj = {
        monthN: helpers.today.getDate('month'),
        yearN: helpers.today.getDate('year'),
        title: helpers.today.formatDate('MMMM YYYY'),
      };

      return {
        weekTitle,
        nextMonthObj,
        prevMonthObj,
        nextYearObj,
        prevYearObj,
        todayObj,
        title,
      };
    };

    /**
     * @param {number} startDayOfWeek - 0 Sunday, 1 Monday, 6 Saturday
     * @param {number} selectedMonthN - Selected month number, 1 or 2 digits no zero leading
     * @param {number} selectedYearN - Selected year number, 4 digits
     * @param {object} prevMonthObj
     * @param {object} nextMonthObj
     */
    this._calendarDays = (
      startDayOfWeek,
      selectedMonthN,
      selectedYearN,
      prevMonthObj,
      nextMonthObj
    ) => {
      let days = [];

      const thisMonth = dates.newDate(
        `${selectedYearN}-${selectedMonthN}`,
        'YYYY-M'
      );
      const weekdayFirstDayThisMonth = thisMonth.getDate('day');
      const daysInThisMonth = thisMonth.daysInMonthDate();
      const lastDayThisMonth = dates.newDate(
        selectedYearN + '-' + selectedMonthN + '-' + daysInThisMonth,
        'YYYY-M-D'
      );
      const weekdayLastDayThisMonth = lastDayThisMonth.getDate('day');

      // before
      let diffStart = weekdayFirstDayThisMonth - startDayOfWeek;
      if (diffStart < 0) {
        diffStart = 7 + diffStart;
      }
      diffStart = prevMonthObj.daysInMonth - diffStart + 1;
      for (let i = diffStart; i <= prevMonthObj.daysInMonth; i++) {
        days.push({
          date:
            prevMonthObj.yearN +
            '-' +
            helpers.z(prevMonthObj.monthN) +
            '-' +
            helpers.z(i),
          n: i,
          c: '',
          k: ['calendar__day--another-month'],
        });
      }
      // during
      for (let i = 1; i <= daysInThisMonth; i++) {
        days.push({
          date:
            selectedYearN +
            '-' +
            helpers.z(selectedMonthN) +
            '-' +
            helpers.z(i),
          n: i,
          c: '',
          k: [],
        });
      }
      // after
      let diffEnd = startDayOfWeek - 1 - weekdayLastDayThisMonth;
      if (diffEnd < 0) {
        diffEnd = 7 + diffEnd;
      }
      for (let i = 1; i <= diffEnd; i++) {
        days.push({
          date:
            nextMonthObj.yearN +
            '-' +
            helpers.z(nextMonthObj.monthN) +
            '-' +
            helpers.z(i),
          n: i,
          c: '',
          k: ['calendar__day--another-month'],
        });
      }

      return days;
    };

    this.calcCalendarData = function (
      data,
      startDayOfWeek,
      periodLength,
      selectedMonthN,
      selectedYearN
    ) {
      var calendarData = function (data, periodLength, days) {
        // maximum date that is less than or equal the first day of the visible month
        // TODO what is this?
        var floor;
        var firstDay = days[0].date;
        var firstDayDate = dates.newDate(firstDay);
        for (var i5 = 0; i5 < data.quicklist.length; i5++) {
          if (data.quicklist[i5] <= firstDay) {
            floor = data.quicklist[i5]; // eslint-disable-line no-unused-vars
            break;
          }
        }

        // minimum date that is greater than the last day of the visible month
        var ceiling;
        var lastDay = days[days.length - 1].date;
        var lastDayDate = dates.newDate(lastDay);
        for (var i6 = i5 - 1; i6 >= 0; i6--) {
          if (data.quicklist[i6] > lastDay) {
            ceiling = data.quicklist[i6];
            break;
          }
        }

        // list of dates to show in the visible month
        var sliceOfDates = data.quicklist.slice(i6 + 1, i5 + 1);

        // if we have the maximum but not the minimum date, it means we are in the future, so calculate the next events
        if (!ceiling && data.quicklist.length) {
          var lastEventDate = dates.newDate(sliceOfDates[0]);
          var daysLastSinceLastEvent =
            lastDayDate.diffDate(lastEventDate, 'days') + 1;
          if (daysLastSinceLastEvent > data.average) {
            var daysFirstSinceLastEvent =
              firstDayDate.diffDate(lastEventDate, 'days') + 1;
            var daysFirstDiff = daysFirstSinceLastEvent % data.average;
            var n = firstDayDate
              .cloneDate()
              .subtractDate(daysFirstDiff - 1, 'days');
            sliceOfDates = [n.formatDate(helpers.datePattern)];
            var daysEndDiff = daysFirstDiff + days.length;
            var quotient = Math.floor(daysEndDiff / data.average);
            for (var q = 0; q <= quotient; q++) {
              n.addDate(data.average, 'days');
              sliceOfDates.unshift(n.formatDate(helpers.datePattern));
            }
          }
        }

        var firstEventDate = dates.newDate(
          sliceOfDates[sliceOfDates.length - 1]
        );
        var counter = firstDayDate.diffDate(firstEventDate, 'days') + 1;
        var actual = false;

        var todayStr = helpers.todayStr;
        days.forEach(function (item) {
          if (sliceOfDates.indexOf(item.date) !== -1) {
            counter = 1;
          }
          if (counter) {
            // TODO check this if
            if (counter > 0) {
              item.c = counter;
            }
            counter++;
          }
          if (item.date === todayStr) {
            item.k.push('calendar__day--today');
          } else if (item.date > todayStr) {
            item.k.push('calendar__day--future');
          }
          if (item.c === 1) {
            if (data.quicklist.indexOf(item.date) !== -1) {
              actual = true;
              item.k.push('calendar__day--selected');
            } else {
              actual = false;
              item.k.push('calendar__day--selected-future');
            }
          } else if (item.c > 1 && item.c <= periodLength) {
            if (actual) {
              item.k.push('calendar__day--selected');
            } else {
              item.k.push('calendar__day--selected-future');
            }
          } else {
            actual = false;
          }
        });

        return days;
      };

      /**
       * @param {object} data
       * @param {number} startDayOfWeek - 0 Sunday, 1 Monday, 6 Saturday
       * @param {number} periodLength - Length of period
       * @param {number} selectedMonthN - Selected month number
       * @param {number} selectedYearN - Selected year number
       */
      var calendarGet = (
        data,
        startDayOfWeek,
        periodLength,
        selectedMonthN,
        selectedYearN
      ) => {
        // TODO clean variable names
        const giulia = this._calendarChrome(
          startDayOfWeek,
          selectedMonthN,
          selectedYearN
        );

        let days = this._calendarDays(
          startDayOfWeek,
          selectedMonthN,
          selectedYearN,
          giulia.prevMonthObj,
          giulia.nextMonthObj
        );

        days = calendarData(data, periodLength, days);

        var res = {
          days: days,
          week: giulia.weekTitle,
          title: giulia.title,
          next: giulia.nextMonthObj,
          prev: giulia.prevMonthObj,
          nextYear: giulia.nextYearObj,
          prevYear: giulia.prevYearObj,
          current: giulia.todayObj,
        };

        return res;
      };

      return calendarGet(
        data,
        startDayOfWeek,
        periodLength,
        selectedMonthN,
        selectedYearN
      );
    };
  };

  window.calendar = new Calendar();
})(window);

</script>

<script>
  /* global dates, calendar */
'use strict';

(function (window) {
  var Template = function (config) {
    var _self = this;
    _self.config = config;

    this.calendar = function (data, monthN, yearN) {
      var _startDayOfWeek = _self.config.get('startDayOfWeek');
      var _showExtendedMonth = _self.config.get('showExtendedMonth');
      var _periodLength = _self.config.get('periodLength');
      var cal = calendar.calcCalendarData(
        data,
        _startDayOfWeek,
        _periodLength,
        monthN,
        yearN
      );

      var rowsTitle = function (prev, day) {
        return (
          prev +
          `
          <th class="calendar__weekday">${day}</th>
        `
        );
      };

      var rowDays = function (prev, item) {
        return (
          prev +
          `
          <td data-counter="${item.c}" class="calendar__day ${item.k.join(
            ' '
          )}">${item.n}</td>
        `
        );
      };

      var rowsContent = function () {
        var arr = [];
        for (var i = 0; i < cal.days.length; i += 7) {
          arr.push(cal.days.slice(i, i + 7));
        }
        var table = arr.reduce(function (prev, item) {
          return (
            prev +
            `
            <tr>
              ${item.reduce(rowDays, '')}
            </tr>
            `
          );
        }, '');
        return table;
      };

      var showExtendedMonth = _showExtendedMonth ? 'calendar--extended' : '';

      var currentMonthLink =
        monthN === cal.current.monthN && yearN === cal.current.yearN
          ? ''
          : `
        <a href="#/calendar" class="calendar__nav__link" title="${cal.current.title}" aria-label="This month, ${cal.current.title}">
          <svg class="icon calendar__nav__icon" focusable="false" aria-hidden="true">
            <use href="#icon-today"></use>
          </svg>
        </a>
      `;

      var nav = `
        <tr>
          <th colspan="7">
            <nav class="calendar__nav">
              <div>
                <a href="#/calendar/${cal.prev.yearN}/${cal.prev.monthN}" class="calendar__nav__link" title="${cal.prev.title}" aria-label="Previous month, ${cal.prev.title}">
                  <svg class="icon calendar__nav__icon" focusable="false" aria-hidden="true">
                    <use href="#icon-prev"></use>
                  </svg>
                </a>
                <a href="#/calendar/${cal.next.yearN}/${cal.next.monthN}" class="calendar__nav__link" title="${cal.next.title}" aria-label="Next month, ${cal.next.title}">
                  <svg class="icon calendar__nav__icon" focusable="false" aria-hidden="true">
                    <use href="#icon-next"></use>
                  </svg>
                </a>
              </div>
            
              <div class="calendar__nav__middle">
                <span>${cal.title}</span>
                ${currentMonthLink}
              </div>

              <div>
                <a href="#/calendar/${cal.prevYear.yearN}/${cal.prevYear.monthN}" class="calendar__nav__link" title="${cal.prevYear.title}" aria-label="Previous year, ${cal.prevYear.title}">
                  <svg class="icon calendar__nav__icon" focusable="false" aria-hidden="true">
                    <use href="#icon-up"></use>
                  </svg>
                </a>
                <a href="#/calendar/${cal.nextYear.yearN}/${cal.nextYear.monthN}" class="calendar__nav__link" title="${cal.nextYear.title}" aria-label="Next year, ${cal.nextYear.title}">
                  <svg class="icon calendar__nav__icon" focusable="false" aria-hidden="true">
                    <use href="#icon-down"></use>
                  </svg>
                </a>
              </div>
            </nav>
          </th>
        </tr>
      `;

      var week = `
      <tr>
        ${cal.week.reduce(rowsTitle, '')}
      </tr>
      `;

      var table = `
        <table class="calendar ${showExtendedMonth}">
          <thead>
            ${nav}
            ${week}
          </thead>
          <tbody>
            ${rowsContent()}
          </tbody>
          <tfoot>
            ${week}
            ${nav}
          </tfoot>
        </table>
      `;

      return table;
    };

    this.log = function (data) {
      var rows = function (prev, item, index) {
        var s = dates.formatOnce(item.date, 'MMM D, YYYY');
        var interval =
          typeof data.intervals[index] !== 'undefined'
            ? data.intervals[index]
            : '';
        return (
          prev +
          `
          <tr>
            <td class="log-list__info log-list__info--date"><time datetime="${item.date}">${s}</time></td>
            <td class="log-list__info log-list__info--interval">${interval}</td>
            <td class="log-list__info log-list__info--edit">
              <button data-id="${item.id}" class="log-list__button js-edit" title="Edit" aria-label="Edit">
                <svg class="icon log-list__button__icon" focusable="false" aria-hidden="true">
                  <use href="#icon-edit"></use>
                </svg>
              </button>
            </td>
            <td class="log-list__info log-list__info--remove">
              <button data-id="${item.id}" data-date="${s}" class="log-list__button js-remove" title="Remove" aria-label="Remove">
                <svg class="icon log-list__button__icon" focusable="false" aria-hidden="true">
                  <use href="#icon-delete"></use>
                </svg>
              </button>
            </td>
          </tr>
        `
        );
      };

      var table = `
        ${data.list.reduce(rows, '')}
      `;

      return table;
    };

    this.alert = function (type, msg) {
      var code = `
        <div class="alert alert--${type}">
          <span>${msg}</span>
          <button class="alert__close js-close" title="Close" aria-label="Close" onClick="this.parentNode.remove()">
            <svg class="icon alert__close__icon" focusable="false" aria-hidden="true">
              <use href="#icon-cancel-circle"></use>
            </svg>
          </button>
        </div>
      `;

      return code;
    };
  };

  window.app = window.app || {};
  window.app.Template = Template;
})(window);

</script>

<script>
  /* global $, $$, dates, helpers, VERSION */
'use strict';

(function (window) {
  /**
   * View
   */
  var View = function (template) {
    var _self = this;
    _self.template = template;
    _self.config = _self.template.config;

    var $sections = $('.main-section');
    var $navLinks = $('.main-nav a');

    var $homeCalc = $$('#home-calc');
    var $next = $$('#next');
    var $countdown = $$('#countdown');
    var $counter = $$('#counter');
    var $homeAdd = $$('#home-add');
    var $addFormToggle = $('.add-form__toggle');
    var $addForm = $('.add-form');
    var $addDate = $('input[name="add-date"]');

    var $editForm = $$('#edit-form--log');
    var $editFormTr = $$('#edit-form--log-tr');

    var $cal = $$('#calendar-data');
    var $average = $$('#average');
    var $log = $$('#log-data');

    var $importData = $$('#import-data');
    var $exportData = $$('#export-data');
    var $shareData = $$('#share-data');
    var $deleteAll = $$('#delete-all');
    var $settingsWeekStart = $$('#settings-week-start');
    var $settingsExtendedMonth = $$('#settings-extended-month');

    var $settingsPeriodLength = $$('#settings-period-length');
    var $settingsCycleLength = $$('#settings-cycle-length');

    var $alerts = $$('#alerts');

    var $statusOffline = $$('#status-icon-offline');

    var $version = $$('#version');

    var _viewCommands = {};

    _viewCommands.alert = function (type, msg) {
      $alerts.innerHTML += _self.template.alert(type, msg);
    };

    _viewCommands.info = function (err) {
      _viewCommands.alert('info', err);
    };
    this.giulia = function () {
      _viewCommands.alert('info', 'ciao');
      _viewCommands.alert('error', 'ciao');
      _viewCommands.alert('success', 'ciao');
      _viewCommands.alert('warning', 'ciao');
    };

    _viewCommands.error = function (err) {
      _viewCommands.alert('error', err);
    };

    _viewCommands.success = function (err) {
      _viewCommands.alert('success', err);
    };

    _viewCommands.warning = function (err) {
      _viewCommands.alert('warning', err);
    };

    _viewCommands.section = function (model, parameter, args) {
      parameter = parameter || 'home';
      $sections.forEach(function ($el) {
        $el.classList.remove('main-section--selected');
      });
      let $selectedSection = $$('#' + parameter);

      if (!$selectedSection) {
        parameter = 'not-found';
        $selectedSection = $$('#' + parameter);
      }

      $selectedSection.classList.add('main-section--selected');
      $navLinks.forEach(function ($el) {
        if ($el.getAttribute('href') === '#/' + parameter) {
          $el.classList.add('main-nav__link--selected');
        } else {
          $el.classList.remove('main-nav__link--selected');
        }
      });
      if (parameter === 'calendar') {
        let yearN = args[0];
        let monthN = args[1];

        const todayMonthN = helpers.today.getDate('month');
        const todayYearN = helpers.today.getDate('year');

        monthN = parseInt(monthN) || todayMonthN;
        yearN = parseInt(yearN) || todayYearN;

        _viewCommands.calendar(model, monthN, yearN);
      }
    };

    _viewCommands.chrome = function () {
      $version.innerHTML = VERSION;
    };

    _viewCommands.home = function (model) {
      $next.innerHTML = model.next
        ? dates.formatOnce(model.next, 'ddd, MMM D')
        : '';
      $next.setAttribute('datetime', model.next ? model.next : '');
      $countdown.innerHTML = model.countdown;
      $counter.innerHTML = model.counter;
      $homeCalc.classList.toggle('home__calc--invisible', !model.next);
      var todayStr = helpers.todayStr;
      $addDate.forEach(function ($el) {
        $el.defaultValue = todayStr;
        $el.value = todayStr;
        $el.max = todayStr;
      });
      // hide add button if we are into the period time
      $homeAdd.classList.toggle(
        'home_add--hide',
        model.counter > 0 && model.counter <= _self.config.get('periodLength')
      );
    };

    _viewCommands.calendar = function (model, month, year) {
      $cal.innerHTML = _self.template.calendar(model, month, year);
    };

    _viewCommands.log = function (model) {
      $average.innerHTML = model.average;
      $log.innerHTML = _self.template.log(model);
    };

    _viewCommands.settings = function () {
      if (_self.config.get('startDayOfWeek')) {
        $settingsWeekStart.checked = true;
      } else {
        $settingsWeekStart.checked = false;
      }
      if (_self.config.get('showExtendedMonth')) {
        $settingsExtendedMonth.checked = true;
      } else {
        $settingsExtendedMonth.checked = false;
      }
      $settingsPeriodLength.value = _self.config.get('periodLength');
      $settingsCycleLength.value = _self.config.get('cycleLength');
    };

    _viewCommands.offline = function (status) {
      $statusOffline.classList.toggle(
        'main-header__status__icon--active',
        status
      );
    };

    this.render = function (viewCmd, model, parameter, args) {
      _viewCommands[viewCmd](model, parameter, args);
    };

    this.bind = function (event, handler) {
      if (event === 'itemAdd') {
        $addFormToggle.forEach(function ($el) {
          $el.on('click', function () {
            this.form.classList.add('add-form--selected');
            this.form.elements['add-date'].focus();
            this.form.elements['add-date'].click();
          });
        });

        $addForm.forEach(function ($el) {
          $el.on('submit', function (event) {
            event.preventDefault();
            var res = handler(this.elements['add-date'].value);
            if (res !== -1) {
              this.reset();
            }
          });
        });
        $addForm.forEach(function ($el) {
          $el.on('reset', function () {
            this.classList.remove('add-form--selected');
          });
        });
      } else if (event === 'itemRemove') {
        helpers.$delegate($log, '.js-remove', 'click', function () {
          var $tr = this.parentNode.parentNode;
          $log
            .querySelectorAll('.log-list__item--selected')
            .forEach(function ($el) {
              $el.classList.remove('log-list__item--selected');
            });
          $tr.classList.add('log-list__item--selected');
          // When showed a confirm dialog in Chrome and similar browsers, earlier DOM changes are not yet visible, hence the delay with setTimeout
          // https://stackoverflow.com/a/59286014
          setTimeout(() => {
            if (
              window.confirm(
                'Are you sure you want to delete `' +
                  this.getAttribute('data-date') +
                  '`?'
              )
            ) {
              handler(this.getAttribute('data-id'));
            } else {
              $tr.classList.toggle('log-list__item--selected');
            }
          }, 0);
        });
      } else if (event === 'showItemEdit') {
        helpers.$delegate($log, '.js-edit', 'click', function () {
          var id = this.getAttribute('data-id');
          var $tr = this.parentNode.parentNode;
          var { date } = handler(id);

          $editForm.elements['edit-id'].value = id;
          $editForm.elements['edit-date'].value = date;
          $editForm.elements['edit-date'].max = helpers.todayStr;

          $log
            .querySelectorAll('.log-list__item--selected')
            .forEach(function ($el) {
              $el.classList.remove('log-list__item--selected');
            });
          $tr.classList.add('log-list__item--selected');
          $tr.parentNode.insertBefore($editFormTr, $tr.nextSibling);
        });
        $editForm.on('reset', function () {
          if ($editFormTr.previousSibling) {
            $editFormTr.previousSibling.classList.remove(
              'log-list__item--selected'
            );
          }
          $editFormTr.remove();
        });
      } else if (event === 'itemEdit') {
        $editForm.on('submit', function (event) {
          event.preventDefault();
          var res = handler(
            this.elements['edit-id'].value,
            this.elements['edit-date'].value
          );
          if (res !== -1) {
            this.reset();
          }
        });
      } else if (event === 'importData') {
        $importData.on('click', function (event) {
          if (
            !window.confirm(
              'This will completely overwrite the data. Do you want to continue?'
            )
          ) {
            event.preventDefault();
          }
        });
        $importData.on('change', function () {
          const [file] = $importData.files;
          handler(file);
        });
      } else if (event === 'exportData') {
        $exportData.on('click', function () {
          handler();
        });
      } else if (event === 'shareData') {
        $shareData.on('click', function () {
          handler();
        });
      } else if (event === 'itemRemoveAll') {
        $deleteAll.on('click', function () {
          if (
            window.confirm(
              'Are you sure you want to delete all the entries and reset the settings?'
            )
          ) {
            handler();
          }
        });
      } else if (event === 'settingsUpdate') {
        var data = {};

        $settingsWeekStart.on('change', function () {
          if (this.checked) {
            data.startDayOfWeek = 1;
          } else {
            data.startDayOfWeek = 0;
          }
          handler(data);
        });

        $settingsExtendedMonth.on('change', function () {
          if (this.checked) {
            data.showExtendedMonth = true;
          } else {
            data.showExtendedMonth = false;
          }
          handler(data);
        });

        $settingsPeriodLength.on('input', function () {
          data.periodLength = this.value * 1;
          handler(data);
        });

        $settingsCycleLength.on('input', function () {
          data.cycleLength = this.value * 1;
          handler(data);
        });

        $('.js-number').forEach(function ($item) {
          var $add = $item.querySelector('.js-number__add');
          var $sub = $item.querySelector('.js-number__sub');
          var $input = $item.querySelector('.js-number__input');
          var min = $input.min ? Number($input.min) : null;
          var max = $input.max ? Number($input.max) : null;
          // TODO maybe disable the buttons when cannot go above/below min/max
          $sub.on('click', function () {
            if (min !== null && $input.value <= min) {
              return;
            }
            $input.value--;
            $input.dispatchEvent(new Event('input'));
          });
          $add.on('click', function () {
            if (max !== null && $input.value >= max) {
              return;
            }
            $input.value++;
            $input.dispatchEvent(new Event('input'));
          });
        });
      }
    };
  };

  // export to window
  window.app = window.app || {};
  window.app.View = View;
})(window);

</script>

<script>
  /* global helpers, NAMESPACE, VERSION, FILE */
'use strict';

(function (window) {
  /**
   * Take a model and view and acts as the controller between them
   * @param {object} model The model instance
   * @param {object} view The view instance
   */
  var Controller = function (model, view) {
    var _self = this;
    _self.model = model;
    _self.view = view;
    _self.config = _self.view.config;

    /**
     * Show the selected section
     * @param {string} locationHash
     */
    this.setSection = function (locationHash) {
      var args = locationHash.split('/');
      args.shift();
      var section = args.shift();
      _self.view.render('section', _self.model, section, args);
    };

    /**
     * Insert data into the views
     */
    this.setData = function () {
      _self.view.render('chrome');
      _self.view.render('home', _self.model);
      _self.view.render('log', _self.model);
      _self.view.render('settings');
    };

    this.addItem = function (date) {
      var res = _self.model.add(date);
      if (res !== -1) {
        _self.setData();
      } else {
        _self.view.render('error', 'Error adding entry');
      }
      return res;
    };

    this.removeItem = function (id) {
      var res = _self.model.remove(id);
      if (res !== -1) {
        _self.setData();
      } else {
        _self.view.render('error', 'Error removing entry');
      }
      return res;
    };

    this.editItem = function (id, date) {
      var res = _self.model.edit(id, date);
      if (res !== -1) {
        _self.setData();
      } else {
        _self.view.render('error', 'Error editing entry');
      }
      return res;
    };

    this.removeAllItem = function () {
      _self.config.reset();
      _self.model.clear();
      _self.setData();
      _self.view.render('success', 'Data deleted successfully');
    };

    this.updateSettings = function (data) {
      _self.config.update(data);
      _self.model.calc();
      _self.setData();
    };

    this.importData = async function (file) {
      let data = {};

      try {
        const res = await helpers.readFromInputFile(file);
        data = JSON.parse(res)[NAMESPACE];
      } catch (e) {
        _self.view.render('error', e);
        return;
      }
      // TODO should check that the data imported is correct
      _self.model.update(data.list);
      _self.config.update(data.config);

      // update the ui
      _self.setData();
      _self.view.render('success', 'Data imported successfully');
    };

    const prepareDataForExport = function () {
      const data = JSON.stringify({
        [NAMESPACE]: {
          version: VERSION,
          list: _self.model.list,
          config: _self.config.getAll(),
        },
      });
      const now = helpers.todayStr;
      const filename = FILE.name.replace('${now}', now);
      const title = FILE.title.replace('${now}', now);

      return { data, filename, title };
    };

    this.exportData = async function () {
      const { data, filename } = prepareDataForExport();
      await helpers.writeToFile(filename, data);
    };

    this.shareData = function () {
      const { data, filename, title } = prepareDataForExport();
      try {
        helpers.shareTo(filename, data, title);
      } catch (e) {
        _self.view.render('error', e);
      }
    };

    _self.view.bind('itemAdd', function (date) {
      return _self.addItem(date);
    });

    _self.view.bind('itemRemove', function (id) {
      return _self.removeItem(id);
    });

    _self.view.bind('itemEdit', function (id, date) {
      return _self.editItem(id, date);
    });

    _self.view.bind('showItemEdit', function (id) {
      return _self.model.getById(id);
    });

    _self.view.bind('importData', function (file) {
      return _self.importData(file);
    });

    _self.view.bind('exportData', function () {
      return _self.exportData();
    });

    _self.view.bind('shareData', function () {
      return _self.shareData();
    });

    _self.view.bind('itemRemoveAll', function () {
      return _self.removeAllItem();
    });

    _self.view.bind('settingsUpdate', function (data) {
      _self.updateSettings(data);
    });

    // _self.view.bind('alert', function() {
    // });
  };

  // export to window
  window.app = window.app || {};
  window.app.Controller = Controller;
})(window);

</script>

<script>
'use strict';

(function (window) {
  const Offline = function ({
    showOffline = () => {},
    showInfo = () => {},
    debug = false,
    registerFile = 'sw.js',
    msgInstalled = 'This app is now available offline!',
    msgUpdated = 'This app has an update, please refresh.',
  }) {
    debug && console.log('debug: on');
    let isSWInstalled = false;

    /**
     * Show service worker status
     * @param {boolean} status true if sw is active
     */
    const swUIStatus = (status) => {
      debug && console.log('debug: sw status', !!status);
      showOffline(status);
    };

    /**
     * Show service worker has been installed for the first time ever
     */
    const swUIFirstTime = () => {
      debug && console.log('debug: sw first time ever');
      swUIStatus(true);
      swUIMessage(msgInstalled);
    };

    /**
     * Show service worker has been installed
     */
    const swUIInstalled = () => {
      debug && console.log('debug: sw installed');
      swUIStatus(true);
    };

    /**
     * Show that service worker has a new update to show
     */
    const swUIUpdate = () => {
      debug && console.log('debug: sw there is a new update, please refresh');
      swUIMessage(msgUpdated);
    };

    /**
     * Show service worker has returned an error
     * @param {Object} err error
     */
    const swUIError = (err) => {
      debug && console.error('debug: sw registration failed: ', err);
    };

    /**
     * Change the sw message
     * @param {string} msg
     */
    const swUIMessage = (msg) => {
      showInfo(msg);
    };

    /**
     * Check if service worker is active
     * @returns {boolean}
     */
    const swCheckStatus = () => {
      return !!navigator.serviceWorker.controller;
    };

    const onStateChange = (newWorker) => {
      debug && console.log('debug: sw onStateChange', newWorker.state);
      if (newWorker.state === 'activated') {
        if (!isSWInstalled) {
          isSWInstalled = swCheckStatus();
          swUIFirstTime();
        } else {
          swUIInstalled();
        }
      } else if (
        newWorker.state === 'installed' &&
        navigator.serviceWorker.controller
      ) {
        swUIUpdate();
      }
    };

    const init = function () {
      if ('serviceWorker' in navigator) {
        isSWInstalled = swCheckStatus();

        if (isSWInstalled) {
          swUIInstalled();
        }

        navigator.serviceWorker
          .register(registerFile)
          .then((registration) => {
            registration.addEventListener('updatefound', () => {
              const newWorker = registration.installing;

              registration.installing.addEventListener('statechange', () =>
                onStateChange(newWorker)
              );
            });
          })
          .catch((err) => {
            swUIError(err);
          });
      }
    };

    /**
     * Send message object to the service worker
     * @param {object} message
     */
    const sendMessage = (message) => {
      navigator.serviceWorker.controller.postMessage(message);
    };

    /**
     * Unregister service worker and send message to delete all caches
     */
    this.clearSW = async () => {
      const registrations = await navigator.serviceWorker.getRegistrations();
      const unregisterPromises = registrations.map((registration) =>
        registration.unregister()
      );
      await Promise.all([...unregisterPromises]);
      sendMessage({
        type: 'clear',
      });
    };

    init();
  };

  // export to window
  window.app = window.app || {};
  window.app.Offline = Offline;
})(window);

</script>

<script>
  /* global app, NAMESPACE, DEFAULT_USER_SETTINGS, FEATURES */
'use strict';

var Tracker = function (namespace, settings) {
  this.storage = new app.Storage(namespace);
  this.config = new app.Config(settings, this.storage);
  this.model = new app.Model(this.config, this.storage);
  this.template = new app.Template(this.config);
  this.view = new app.View(this.template);
  this.controller = new app.Controller(this.model, this.view);
};

var tracker = new Tracker(NAMESPACE, DEFAULT_USER_SETTINGS);

var show = function () {
  tracker.controller.setSection(document.location.hash);
};

var load = function () {
  tracker.controller.setData();
  show();
};

if (location.protocol === 'http:' && location.hostname !== 'localhost') {
  const newUrl = location.href.replace('http://', 'https://');
  tracker.view.render(
    'warning',
    `Warning: this app is better loaded from its <a href="${newUrl}">https counterpart</a>`
  );
}

window.addEventListener('load', load);
window.addEventListener('hashchange', show);

if (FEATURES.offline) {
  tracker.offline = new app.Offline({
    showOffline: (status) => tracker.view.render('offline', status),
    showInfo: (msg) => tracker.view.render('info', msg),
  });
}

</script>

</body>
</html>